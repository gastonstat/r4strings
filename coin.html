<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Pack YouR Code</title>
  <meta name="description" content="Basic example of how to create an R package based on S3 classes.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Pack YouR Code" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Basic example of how to create an R package based on S3 classes." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Pack YouR Code" />
  
  <meta name="twitter:description" content="Basic example of how to create an R package based on S3 classes." />
  

<meta name="author" content="Gaston Sanchez">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="function.html">
<link rel="next" href="methods1.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Pack YouR Code</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i>About this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a></li>
</ul></li>
<li class="part"><span><b>I Motivation</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Let’s toss a coin</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#coin-object"><i class="fa fa-check"></i><b>1.1</b> Coin object</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#tossing-a-coin"><i class="fa fa-check"></i><b>1.2</b> Tossing a coin</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#random-samples"><i class="fa fa-check"></i><b>1.2.1</b> Random Samples</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#the-random-seed"><i class="fa fa-check"></i><b>1.3</b> The Random Seed</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#sampling-with-different-probabilities"><i class="fa fa-check"></i><b>1.4</b> Sampling with different probabilities</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#simulating-tossing-a-coin"><i class="fa fa-check"></i><b>1.4.1</b> Simulating tossing a coin</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="function.html"><a href="function.html"><i class="fa fa-check"></i><b>2</b> Tossing Function</a><ul>
<li class="chapter" data-level="2.1" data-path="function.html"><a href="function.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="function.html"><a href="function.html#a-toss-function"><i class="fa fa-check"></i><b>2.2</b> A <code>toss()</code> function</a></li>
<li class="chapter" data-level="2.3" data-path="function.html"><a href="function.html#documenting-functions"><i class="fa fa-check"></i><b>2.3</b> Documenting Functions</a></li>
<li class="chapter" data-level="2.4" data-path="function.html"><a href="function.html#roxygen-comments"><i class="fa fa-check"></i><b>2.4</b> Roxygen Comments</a><ul>
<li class="chapter" data-level="2.4.1" data-path="function.html"><a href="function.html#about-roxygen-comments"><i class="fa fa-check"></i><b>2.4.1</b> About Roxygen Comments</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Classes</b></span></li>
<li class="chapter" data-level="3" data-path="coin.html"><a href="coin.html"><i class="fa fa-check"></i><b>3</b> Coin Objects</a><ul>
<li class="chapter" data-level="3.1" data-path="coin.html"><a href="coin.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="coin.html"><a href="coin.html#objects-and-classes"><i class="fa fa-check"></i><b>3.2</b> Objects and Classes</a></li>
<li class="chapter" data-level="3.3" data-path="coin.html"><a href="coin.html#s3-classes"><i class="fa fa-check"></i><b>3.3</b> S3 Classes</a><ul>
<li class="chapter" data-level="3.3.1" data-path="coin.html"><a href="coin.html#making-an-object"><i class="fa fa-check"></i><b>3.3.1</b> Making an object</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="coin.html"><a href="coin.html#a-more-robust-coin-class"><i class="fa fa-check"></i><b>3.4</b> A more robust <code>&quot;coin&quot;</code> class</a></li>
<li class="chapter" data-level="3.5" data-path="coin.html"><a href="coin.html#improving-coin-objects"><i class="fa fa-check"></i><b>3.5</b> Improving <code>&quot;coin&quot;</code> objects</a><ul>
<li class="chapter" data-level="3.5.1" data-path="coin.html"><a href="coin.html#attributes"><i class="fa fa-check"></i><b>3.5.1</b> Attributes</a></li>
<li class="chapter" data-level="3.5.2" data-path="coin.html"><a href="coin.html#using-a-list"><i class="fa fa-check"></i><b>3.5.2</b> Using a list</a></li>
<li class="chapter" data-level="3.5.3" data-path="coin.html"><a href="coin.html#auxiliary-checker"><i class="fa fa-check"></i><b>3.5.3</b> Auxiliary Checker</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="coin.html"><a href="coin.html#print-method-for-coin"><i class="fa fa-check"></i><b>3.6</b> Print Method for <code>&quot;coin&quot;</code></a></li>
<li class="chapter" data-level="3.7" data-path="coin.html"><a href="coin.html#extending-classes"><i class="fa fa-check"></i><b>3.7</b> Extending classes</a></li>
</ul></li>
<li class="part"><span><b>III Methods</b></span></li>
<li class="chapter" data-level="4" data-path="methods1.html"><a href="methods1.html"><i class="fa fa-check"></i><b>4</b> Methods (part 1)</a><ul>
<li class="chapter" data-level="4.1" data-path="methods1.html"><a href="methods1.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="methods1.html"><a href="methods1.html#improving-toss"><i class="fa fa-check"></i><b>4.2</b> Improving <code>toss()</code></a></li>
<li class="chapter" data-level="4.3" data-path="methods1.html"><a href="methods1.html#generic-method-toss"><i class="fa fa-check"></i><b>4.3</b> Generic Method <code>toss</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="toss.html"><a href="toss.html"><i class="fa fa-check"></i><b>5</b> Object toss</a><ul>
<li class="chapter" data-level="5.1" data-path="toss.html"><a href="toss.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="toss.html"><a href="toss.html#motivation-for-object-toss"><i class="fa fa-check"></i><b>5.2</b> Motivation for object <code>&quot;toss&quot;</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="toss.html"><a href="toss.html#auxiliary-constructor"><i class="fa fa-check"></i><b>5.2.1</b> Auxiliary Constructor</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="toss.html"><a href="toss.html#main-function-toss"><i class="fa fa-check"></i><b>5.3</b> Main Function <code>toss()</code></a></li>
<li class="chapter" data-level="5.4" data-path="toss.html"><a href="toss.html#upgrading-toss"><i class="fa fa-check"></i><b>5.4</b> Upgrading <code>toss()</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="toss.html"><a href="toss.html#in-summary"><i class="fa fa-check"></i><b>5.4.1</b> In Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="methods2.html"><a href="methods2.html"><i class="fa fa-check"></i><b>6</b> Methods (part 2)</a><ul>
<li class="chapter" data-level="6.1" data-path="methods2.html"><a href="methods2.html#introduction-4"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="methods2.html"><a href="methods2.html#print-method"><i class="fa fa-check"></i><b>6.2</b> Print Method</a></li>
<li class="chapter" data-level="6.3" data-path="methods2.html"><a href="methods2.html#summary-method"><i class="fa fa-check"></i><b>6.3</b> Summary Method</a></li>
<li class="chapter" data-level="6.4" data-path="methods2.html"><a href="methods2.html#plot-method"><i class="fa fa-check"></i><b>6.4</b> Plot Method</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="methods3.html"><a href="methods3.html"><i class="fa fa-check"></i><b>7</b> Additional Methods</a><ul>
<li class="chapter" data-level="7.1" data-path="methods3.html"><a href="methods3.html#introduction-5"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="methods3.html"><a href="methods3.html#replacement-method"><i class="fa fa-check"></i><b>7.2</b> Replacement Method</a></li>
<li class="chapter" data-level="7.3" data-path="methods3.html"><a href="methods3.html#extraction-method"><i class="fa fa-check"></i><b>7.3</b> Extraction Method</a></li>
<li class="chapter" data-level="7.4" data-path="methods3.html"><a href="methods3.html#is-toss"><i class="fa fa-check"></i><b>7.4</b> Is <code>&quot;toss&quot;</code></a></li>
<li class="chapter" data-level="7.5" data-path="methods3.html"><a href="methods3.html#addition-method"><i class="fa fa-check"></i><b>7.5</b> Addition Method</a></li>
</ul></li>
<li class="part"><span><b>IV Package Structure</b></span></li>
<li class="chapter" data-level="8" data-path="toy-package.html"><a href="toy-package.html"><i class="fa fa-check"></i><b>8</b> Toy Package</a><ul>
<li class="chapter" data-level="8.1" data-path="toy-package.html"><a href="toy-package.html#introduction-6"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="toy-package.html"><a href="toy-package.html#an-off-the-shelf-package"><i class="fa fa-check"></i><b>8.2</b> An off-the-shelf package</a></li>
<li class="chapter" data-level="8.3" data-path="toy-package.html"><a href="toy-package.html#minimal-filestructure"><i class="fa fa-check"></i><b>8.3</b> Minimal Filestructure</a></li>
<li class="chapter" data-level="8.4" data-path="toy-package.html"><a href="toy-package.html#quick-build"><i class="fa fa-check"></i><b>8.4</b> Quick Build</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>9</b> Filestructure</a><ul>
<li class="chapter" data-level="9.1" data-path="structure.html"><a href="structure.html#introduction-7"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="structure.html"><a href="structure.html#scenarios"><i class="fa fa-check"></i><b>9.2</b> Scenarios</a></li>
<li class="chapter" data-level="9.3" data-path="structure.html"><a href="structure.html#minimal-package"><i class="fa fa-check"></i><b>9.3</b> Minimal Package</a></li>
<li class="chapter" data-level="9.4" data-path="structure.html"><a href="structure.html#default-devtools-setting"><i class="fa fa-check"></i><b>9.4</b> Default devtools setting</a></li>
<li class="chapter" data-level="9.5" data-path="structure.html"><a href="structure.html#our-working-example"><i class="fa fa-check"></i><b>9.5</b> Our working example</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="description.html"><a href="description.html"><i class="fa fa-check"></i><b>10</b> Description File</a><ul>
<li class="chapter" data-level="10.1" data-path="description.html"><a href="description.html#introduction-8"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="description.html"><a href="description.html#sample-description"><i class="fa fa-check"></i><b>10.2</b> Sample Description</a></li>
<li class="chapter" data-level="10.3" data-path="description.html"><a href="description.html#mandatory-fields"><i class="fa fa-check"></i><b>10.3</b> Mandatory Fields</a><ul>
<li class="chapter" data-level="10.3.1" data-path="description.html"><a href="description.html#package-name"><i class="fa fa-check"></i><b>10.3.1</b> Package Name</a></li>
<li class="chapter" data-level="10.3.2" data-path="description.html"><a href="description.html#title"><i class="fa fa-check"></i><b>10.3.2</b> Title</a></li>
<li class="chapter" data-level="10.3.3" data-path="description.html"><a href="description.html#description-1"><i class="fa fa-check"></i><b>10.3.3</b> Description</a></li>
<li class="chapter" data-level="10.3.4" data-path="description.html"><a href="description.html#author-and-maintainer"><i class="fa fa-check"></i><b>10.3.4</b> Author and Maintainer</a></li>
<li class="chapter" data-level="10.3.5" data-path="description.html"><a href="description.html#version"><i class="fa fa-check"></i><b>10.3.5</b> Version</a></li>
<li class="chapter" data-level="10.3.6" data-path="description.html"><a href="description.html#license"><i class="fa fa-check"></i><b>10.3.6</b> License</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="description.html"><a href="description.html#optional-fields"><i class="fa fa-check"></i><b>10.4</b> Optional Fields</a><ul>
<li class="chapter" data-level="10.4.1" data-path="description.html"><a href="description.html#encoding"><i class="fa fa-check"></i><b>10.4.1</b> Encoding</a></li>
<li class="chapter" data-level="10.4.2" data-path="description.html"><a href="description.html#lazydata"><i class="fa fa-check"></i><b>10.4.2</b> LazyData</a></li>
<li class="chapter" data-level="10.4.3" data-path="description.html"><a href="description.html#type"><i class="fa fa-check"></i><b>10.4.3</b> Type</a></li>
<li class="chapter" data-level="10.4.4" data-path="description.html"><a href="description.html#vignettebuilder"><i class="fa fa-check"></i><b>10.4.4</b> VignetteBuilder</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="namespace.html"><a href="namespace.html"><i class="fa fa-check"></i><b>11</b> Namespace</a><ul>
<li class="chapter" data-level="11.1" data-path="namespace.html"><a href="namespace.html#introduction-9"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="namespace.html"><a href="namespace.html#about-namespaces"><i class="fa fa-check"></i><b>11.2</b> About Namespaces</a></li>
<li class="chapter" data-level="11.3" data-path="namespace.html"><a href="namespace.html#namespace-of-a-package"><i class="fa fa-check"></i><b>11.3</b> Namespace of a Package</a><ul>
<li class="chapter" data-level="11.3.1" data-path="namespace.html"><a href="namespace.html#exported-functions"><i class="fa fa-check"></i><b>11.3.1</b> Exported Functions</a></li>
<li class="chapter" data-level="11.3.2" data-path="namespace.html"><a href="namespace.html#roxygen-export"><i class="fa fa-check"></i><b>11.3.2</b> Roxygen export</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tests.html"><a href="tests.html"><i class="fa fa-check"></i><b>12</b> Tests</a><ul>
<li class="chapter" data-level="12.1" data-path="tests.html"><a href="tests.html#introduction-10"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="tests.html"><a href="tests.html#including-tests"><i class="fa fa-check"></i><b>12.2</b> Including Tests</a></li>
<li class="chapter" data-level="12.3" data-path="tests.html"><a href="tests.html#script-testthat.r"><i class="fa fa-check"></i><b>12.3</b> Script <code>testthat.R</code></a></li>
<li class="chapter" data-level="12.4" data-path="tests.html"><a href="tests.html#about-testthat"><i class="fa fa-check"></i><b>12.4</b> About <code>&quot;testthat&quot;</code></a><ul>
<li class="chapter" data-level="12.4.1" data-path="tests.html"><a href="tests.html#list-of-common-expectation-functions"><i class="fa fa-check"></i><b>12.4.1</b> List of common expectation functions</a></li>
<li class="chapter" data-level="12.4.2" data-path="tests.html"><a href="tests.html#remarks"><i class="fa fa-check"></i><b>12.4.2</b> Remarks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="vignettes.html"><a href="vignettes.html"><i class="fa fa-check"></i><b>13</b> Vignettes</a><ul>
<li class="chapter" data-level="13.1" data-path="vignettes.html"><a href="vignettes.html#introduction-11"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="vignettes.html"><a href="vignettes.html#including-vignettes"><i class="fa fa-check"></i><b>13.2</b> Including Vignettes</a></li>
</ul></li>
<li class="part"><span><b>V Packaging</b></span></li>
<li class="chapter" data-level="14" data-path="states.html"><a href="states.html"><i class="fa fa-check"></i><b>14</b> Package States</a><ul>
<li class="chapter" data-level="14.1" data-path="states.html"><a href="states.html#introduction-12"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="states.html"><a href="states.html#package-states"><i class="fa fa-check"></i><b>14.2</b> Package States</a><ul>
<li class="chapter" data-level="14.2.1" data-path="states.html"><a href="states.html#source-package"><i class="fa fa-check"></i><b>14.2.1</b> Source Package</a></li>
<li class="chapter" data-level="14.2.2" data-path="states.html"><a href="states.html#bundled-package"><i class="fa fa-check"></i><b>14.2.2</b> Bundled Package</a></li>
<li class="chapter" data-level="14.2.3" data-path="states.html"><a href="states.html#binary-package"><i class="fa fa-check"></i><b>14.2.3</b> Binary Package</a></li>
<li class="chapter" data-level="14.2.4" data-path="states.html"><a href="states.html#installed-package"><i class="fa fa-check"></i><b>14.2.4</b> Installed Package</a></li>
<li class="chapter" data-level="14.2.5" data-path="states.html"><a href="states.html#in-memory-package"><i class="fa fa-check"></i><b>14.2.5</b> In-memory Package</a></li>
<li class="chapter" data-level="14.2.6" data-path="states.html"><a href="states.html#remarks-1"><i class="fa fa-check"></i><b>14.2.6</b> Remarks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="flow.html"><a href="flow.html"><i class="fa fa-check"></i><b>15</b> Packaging Flow</a><ul>
<li class="chapter" data-level="15.1" data-path="flow.html"><a href="flow.html#introduction-13"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="flow.html"><a href="flow.html#example-structure"><i class="fa fa-check"></i><b>15.2</b> Example Structure</a></li>
<li class="chapter" data-level="15.3" data-path="flow.html"><a href="flow.html#worklfow"><i class="fa fa-check"></i><b>15.3</b> Worklfow</a><ul>
<li class="chapter" data-level="15.3.1" data-path="flow.html"><a href="flow.html#optional-devtools-file"><i class="fa fa-check"></i><b>15.3.1</b> Optional devtools file</a></li>
<li class="chapter" data-level="15.3.2" data-path="flow.html"><a href="flow.html#sample-package-cointoss"><i class="fa fa-check"></i><b>15.3.2</b> Sample Package <code>cointoss</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="sharing.html"><a href="sharing.html"><i class="fa fa-check"></i><b>16</b> Sharing</a><ul>
<li class="chapter" data-level="16.1" data-path="sharing.html"><a href="sharing.html#introduction-14"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="sharing.html"><a href="sharing.html#file-sharing"><i class="fa fa-check"></i><b>16.2</b> File sharing</a></li>
<li class="chapter" data-level="16.3" data-path="sharing.html"><a href="sharing.html#github"><i class="fa fa-check"></i><b>16.3</b> GitHub</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Pack YouR Code</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="coin" class="section level1">
<h1><span class="header-section-number">3</span> Coin Objects</h1>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>We begin describing how to create object classes.</p>
</div>
<div id="objects-and-classes" class="section level2">
<h2><span class="header-section-number">3.2</span> Objects and Classes</h2>
<p>Let’s use the <code>toss()</code> function from the previous chapter. We can invoke <code>toss()</code> to generate a first series of five tosses, and then compute the proportion of heads:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="co"># random seed</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">534</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="co"># five tosses</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5">five &lt;-<span class="st"> </span><span class="kw">toss</span>(coin, <span class="dt">times =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">five</a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="co">#&gt; [1] &quot;heads&quot; &quot;heads&quot; &quot;tails&quot; &quot;tails&quot; &quot;heads&quot;</span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"></a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="co"># prop of heads in five</span></a>
<a class="sourceLine" id="cb26-10" data-line-number="10"><span class="kw">sum</span>(five <span class="op">==</span><span class="st"> &quot;heads&quot;</span>) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(five)</a>
<a class="sourceLine" id="cb26-11" data-line-number="11"><span class="co">#&gt; [1] 0.6</span></a></code></pre></div>
<p>We can also get a second series of tosses, but this time involving tossing a coin six times. Similarly, we compute the proportion of heads:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># six tosses</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">six &lt;-<span class="st"> </span><span class="kw">toss</span>(coin, <span class="dt">times =</span> <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">six</a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co">#&gt; [1] &quot;tails&quot; &quot;heads&quot; &quot;heads&quot; &quot;heads&quot; &quot;tails&quot; &quot;heads&quot;</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5"></a>
<a class="sourceLine" id="cb27-6" data-line-number="6"><span class="co"># prop of heads in six</span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7"><span class="kw">sum</span>(six <span class="op">==</span><span class="st"> &quot;heads&quot;</span>) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(five)</a>
<a class="sourceLine" id="cb27-8" data-line-number="8"><span class="co">#&gt; [1] 0.8</span></a></code></pre></div>
<p>The above code works … except that there is an error; the number of heads in <code>six</code> is being divided by 5 instead of 6. R hasn’t detected this error: it doesn’t know that the division has to be done using <code>length(six)</code>.</p>
<p>Wouldn’t it be prefarable to have some mechanism that prevented this type of error from happening? Bugs will always be part of any programming activity, but it is better to minimize certain types of errors like the one above.</p>
</div>
<div id="s3-classes" class="section level2">
<h2><span class="header-section-number">3.3</span> S3 Classes</h2>
<p>R has two (plus one) object oriented systems, so it can be a bit intimidatingwhen you read and learn about them for the first time.
The goal of this tutorial is not to make you an expert in all R’s OOP systems, but to help you become familiar with the so-called <em>S3 class</em>.</p>
<p><strong>S3</strong> implements a style of OO programming called generic-function OO. S3 uses a special type of function called a <em>generic</em> function that decides which method to call. Keep in mind that S3 is a very casual system: it does not really have a formal definition of classes.</p>
<p>S3 classes are widely-used, in particular for statistical models in the <code>&quot;stats&quot;</code> package. S3 classes are very informal in that there is not a formal definition for an S3 class. Usually, S3 objects are built on top of lists, or atomic vectors with attributes. But you can also turn functions into S3 objects.</p>
<p>Note that in more formal OOP languages, all functions are associated with a class, while in R, only some are.</p>
<div id="making-an-object" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Making an object</h3>
<p>To make an object an instance of a class, you just take an existing base object and set the <code>&quot;class&quot;</code> attribute. You can do that during creation of the object with <code>structure()</code></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="co"># object coin via structure()</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2">coin1 &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">class =</span> <span class="st">&quot;coin&quot;</span>) </a>
<a class="sourceLine" id="cb28-3" data-line-number="3">coin1</a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb28-6" data-line-number="6"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
<p>You can also create an object first, and then specify its class with the function <code>class()</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="co"># object coin via class()</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2">coin2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="kw">class</span>(coin2) &lt;-<span class="st"> &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb29-4" data-line-number="4">coin2</a>
<a class="sourceLine" id="cb29-5" data-line-number="5"><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></a>
<a class="sourceLine" id="cb29-6" data-line-number="6"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb29-7" data-line-number="7"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
<p>As any object in R, you can inspect the class <code>coin1</code>, and <code>coin2</code> with the <code>class()</code> function:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">class</span>(coin1)</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="co">#&gt; [1] &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"></a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="kw">class</span>(coin2)</a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
<p>You can also determine if an object inherits from a specific class using <code>inherits()</code></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">inherits</span>(coin2, <span class="st">&quot;coin&quot;</span>)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>Having a <code>&quot;coin&quot;</code> object, we can pass it to the <code>toss()</code> function to simulate flipping the coin:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">toss</span>(coin1, <span class="dt">times =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="co">#&gt; [1] &quot;tails&quot; &quot;heads&quot; &quot;heads&quot; &quot;heads&quot; &quot;heads&quot;</span></a></code></pre></div>
</div>
</div>
<div id="a-more-robust-coin-class" class="section level2">
<h2><span class="header-section-number">3.4</span> A more robust <code>&quot;coin&quot;</code> class</h2>
<p>Let’s review our class <code>&quot;coin&quot;</code>. The way we defined a coin object was like this:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># object coin</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">coin1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="kw">class</span>(coin1) &lt;-<span class="st"> &quot;coin&quot;</span> </a></code></pre></div>
<p>While this definition is good to illustrate the concept of an object, its class, and how to define generic methods, it is a very loose-defined class. One could create a <code>&quot;coin&quot;</code> out of <code>c('tic', 'tac', 'toe')</code>, and then use <code>toss()</code> on it:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">ttt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;tic&#39;</span>, <span class="st">&#39;tac&#39;</span>, <span class="st">&#39;toe&#39;</span>)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="kw">class</span>(ttt) &lt;-<span class="st"> &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3"></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="kw">toss</span>(ttt)</a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="co">#&gt; [1] &quot;tic&quot;</span></a></code></pre></div>
<p>We need a more formal definition of a coin. For instance, it makes more sense to require that a coin should only have two sides. In this way, the vector <code>ttt</code> would not be a valid coin.</p>
<p>For convenience purposes, we can define a <strong>class constructor</strong> function to
initialize a <code>&quot;coin&quot;</code> object:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">object =</span> <span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)) {</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">  <span class="kw">class</span>(object) &lt;-<span class="st"> &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3">  object</a>
<a class="sourceLine" id="cb35-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb35-5" data-line-number="5"></a>
<a class="sourceLine" id="cb35-6" data-line-number="6"><span class="co"># default coin</span></a>
<a class="sourceLine" id="cb35-7" data-line-number="7"><span class="kw">coin</span>()</a>
<a class="sourceLine" id="cb35-8" data-line-number="8"><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></a>
<a class="sourceLine" id="cb35-9" data-line-number="9"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb35-10" data-line-number="10"><span class="co">#&gt; [1] &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb35-11" data-line-number="11"></a>
<a class="sourceLine" id="cb35-12" data-line-number="12"><span class="co"># another coin</span></a>
<a class="sourceLine" id="cb35-13" data-line-number="13"><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;h&quot;</span>, <span class="st">&quot;t&quot;</span>))</a>
<a class="sourceLine" id="cb35-14" data-line-number="14"><span class="co">#&gt; [1] &quot;h&quot; &quot;t&quot;</span></a>
<a class="sourceLine" id="cb35-15" data-line-number="15"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb35-16" data-line-number="16"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
</div>
<div id="improving-coin-objects" class="section level2">
<h2><span class="header-section-number">3.5</span> Improving <code>&quot;coin&quot;</code> objects</h2>
<p>To implement the requirement that a coin must have two sides, we can check for the length of the input vector:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">object =</span> <span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)) {</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">length</span>(object) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb36-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;object&#39; must be of length 2&quot;</span>)</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb36-5" data-line-number="5">  <span class="kw">class</span>(object) &lt;-<span class="st"> &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb36-6" data-line-number="6">  object</a>
<a class="sourceLine" id="cb36-7" data-line-number="7">}</a></code></pre></div>
<p>Let’s try our modified <code>coin()</code> function to create a US penny like the one in the image below:</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-31"></span>
<img src="images/penny.jpg" alt="US Penny (www.usacoinbook.com)" width="70%" />
<p class="caption">
Figure 3.1: US Penny (www.usacoinbook.com)
</p>
</div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co"># US penny</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2">penny &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;lincoln&quot;</span>, <span class="st">&quot;shield&quot;</span>))</a>
<a class="sourceLine" id="cb37-3" data-line-number="3">penny</a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="co">#&gt; [1] &quot;lincoln&quot; &quot;shield&quot; </span></a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
<p>Now let’s try <code>coin()</code> with an invalid input vector:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="co"># invalid coin</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2">ttt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;tic&#39;</span>, <span class="st">&#39;tac&#39;</span>, <span class="st">&#39;toe&#39;</span>)</a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="kw">coin</span>(ttt)</a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="co">#&gt; Error in coin(ttt): </span></a>
<a class="sourceLine" id="cb38-5" data-line-number="5"><span class="co">#&gt; &#39;object&#39; must be of length 2</span></a></code></pre></div>
<p>Because the <code>toss()</code> function simulates flips using <code>sample()</code>, we can take advantage of the argument <code>prob</code> to specify probabilities for each side of the coin. In this way, we can create <em>loaded</em> (i.e. biased) coins.</p>
<p>The way we are going to keep the probability of each side of the coin is with the use an objetc’s attributes. An example of an attribute is the class of an object. For example the class of our <code>&quot;coin&quot;</code> objects:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">penny</a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="co">#&gt; [1] &quot;lincoln&quot; &quot;shield&quot; </span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
<p>Notice how everytime you print the name of a <code>&quot;coin&quot;</code> object, its class is displayed in the form of <code>attr(,&quot;class&quot;)</code>.</p>
<div id="attributes" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Attributes</h3>
<p>In addition to the class attribute of a coin, the idea is to assign another attribute for the probability values. We can do this by adding a <code>prob</code> argument to the constructor function, and then pass it as an attribute of the coin object inside the class-constructor function.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">object =</span> <span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)) {</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">length</span>(object) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;object&#39; must be of length 2&quot;</span>)</a>
<a class="sourceLine" id="cb40-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb40-5" data-line-number="5">  <span class="kw">attr</span>(object, <span class="st">&quot;prob&quot;</span>) &lt;-<span class="st"> </span>prob</a>
<a class="sourceLine" id="cb40-6" data-line-number="6">  <span class="kw">class</span>(object) &lt;-<span class="st"> &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb40-7" data-line-number="7">  <span class="kw">return</span>(object)</a>
<a class="sourceLine" id="cb40-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb40-9" data-line-number="9"></a>
<a class="sourceLine" id="cb40-10" data-line-number="10"><span class="kw">coin</span>()</a>
<a class="sourceLine" id="cb40-11" data-line-number="11"><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></a>
<a class="sourceLine" id="cb40-12" data-line-number="12"><span class="co">#&gt; attr(,&quot;prob&quot;)</span></a>
<a class="sourceLine" id="cb40-13" data-line-number="13"><span class="co">#&gt; [1] 0.5 0.5</span></a>
<a class="sourceLine" id="cb40-14" data-line-number="14"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb40-15" data-line-number="15"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
<p>In the previous code, the <code>prob</code> argument takes a vector of probabilities for each element in <code>object</code>. This vector is passed to <code>object</code> via the function <code>attr()</code> inside the body of <code>coin()</code>. Notice the use of a default <code>prob = c(0.5, 0.5)</code>, that is, a <em>fair</em> coin by default.</p>
</div>
<div id="using-a-list" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Using a list</h3>
<p>Another way to implement a constructor function <code>coin()</code> that returns an object containing values for both the sides and the probabilities, is to use an R list. Here’s the code for this option:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">sides =</span> <span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)) {</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">length</span>(sides) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb41-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;sides&#39; must be of length 2&quot;</span>)</a>
<a class="sourceLine" id="cb41-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb41-5" data-line-number="5">  res &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">sides =</span> sides, <span class="dt">prob =</span> prob)</a>
<a class="sourceLine" id="cb41-6" data-line-number="6">  <span class="kw">class</span>(res) &lt;-<span class="st"> &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb41-7" data-line-number="7">  <span class="kw">return</span>(res)</a>
<a class="sourceLine" id="cb41-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb41-9" data-line-number="9"></a>
<a class="sourceLine" id="cb41-10" data-line-number="10"><span class="kw">coin</span>()</a>
<a class="sourceLine" id="cb41-11" data-line-number="11"><span class="co">#&gt; $sides</span></a>
<a class="sourceLine" id="cb41-12" data-line-number="12"><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></a>
<a class="sourceLine" id="cb41-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb41-14" data-line-number="14"><span class="co">#&gt; $prob</span></a>
<a class="sourceLine" id="cb41-15" data-line-number="15"><span class="co">#&gt; [1] 0.5 0.5</span></a>
<a class="sourceLine" id="cb41-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb41-17" data-line-number="17"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb41-18" data-line-number="18"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
</div>
<div id="auxiliary-checker" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Auxiliary Checker</h3>
<p>Once again, we need to check for the validity of <code>prob</code>. We basically need to check that <code>prob</code> and its elements meet the following requirements:</p>
<ul>
<li>must be numeric and of length 2</li>
<li>probability values must be between 0 and 1</li>
<li>the sum of these values must add up to 1</li>
</ul>
<p>Here is one possible function to check the aspects of <code>prob</code> listed above:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">check_prob &lt;-<span class="st"> </span><span class="cf">function</span>(prob) {</a>
<a class="sourceLine" id="cb42-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">length</span>(prob) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span><span class="op">!</span><span class="kw">is.numeric</span>(prob)) {</a>
<a class="sourceLine" id="cb42-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;prob&#39; must be a numeric vector of length 2&quot;</span>)</a>
<a class="sourceLine" id="cb42-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb42-5" data-line-number="5">  <span class="cf">if</span> (<span class="kw">any</span>(prob <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">|</span><span class="st"> </span><span class="kw">any</span>(prob <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)) {</a>
<a class="sourceLine" id="cb42-6" data-line-number="6">    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;prob&#39; values must be between 0 and 1&quot;</span>)</a>
<a class="sourceLine" id="cb42-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb42-8" data-line-number="8">  <span class="cf">if</span> (<span class="kw">sum</span>(prob) <span class="op">!=</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb42-9" data-line-number="9">    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">elements in &#39;prob&#39; must add up to 1&quot;</span>)</a>
<a class="sourceLine" id="cb42-10" data-line-number="10">  }</a>
<a class="sourceLine" id="cb42-11" data-line-number="11">  <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb42-12" data-line-number="12">}</a></code></pre></div>
<p>Note that I’m adding a <code>TRUE</code> statement at the end of the function. This is just an auxiliary value to know if the function returns a valid <code>prob</code>. Now let’s test it with <em>valid</em> and <em>invalid</em> values:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="co"># Valid -----------------------</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>))</a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb43-4" data-line-number="4"><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>))</a>
<a class="sourceLine" id="cb43-5" data-line-number="5"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb43-6" data-line-number="6"><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="dv">2</span><span class="op">/</span><span class="dv">3</span>))</a>
<a class="sourceLine" id="cb43-7" data-line-number="7"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb43-8" data-line-number="8"><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="dv">6</span><span class="op">/</span><span class="dv">9</span>))</a>
<a class="sourceLine" id="cb43-9" data-line-number="9"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="co"># Invalid -----------------------</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="co"># bad length</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3"><span class="kw">check_prob</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb44-4" data-line-number="4"><span class="co">#&gt; Error in check_prob(1): </span></a>
<a class="sourceLine" id="cb44-5" data-line-number="5"><span class="co">#&gt; &#39;prob&#39; must be a numeric vector of length 2</span></a>
<a class="sourceLine" id="cb44-6" data-line-number="6"><span class="co"># bad length</span></a>
<a class="sourceLine" id="cb44-7" data-line-number="7"><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>))</a>
<a class="sourceLine" id="cb44-8" data-line-number="8"><span class="co">#&gt; Error in check_prob(c(0.1, 0.2, 0.3)): </span></a>
<a class="sourceLine" id="cb44-9" data-line-number="9"><span class="co">#&gt; &#39;prob&#39; must be a numeric vector of length 2</span></a>
<a class="sourceLine" id="cb44-10" data-line-number="10"><span class="co"># negative probability</span></a>
<a class="sourceLine" id="cb44-11" data-line-number="11"><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="op">-</span><span class="fl">0.2</span>, <span class="fl">0.8</span>))</a>
<a class="sourceLine" id="cb44-12" data-line-number="12"><span class="co">#&gt; Error in check_prob(c(-0.2, 0.8)): </span></a>
<a class="sourceLine" id="cb44-13" data-line-number="13"><span class="co">#&gt; &#39;prob&#39; values must be between 0 and 1</span></a>
<a class="sourceLine" id="cb44-14" data-line-number="14"><span class="co"># what should we do in this case?</span></a>
<a class="sourceLine" id="cb44-15" data-line-number="15"><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.33</span>, <span class="fl">0.66</span>))     </a>
<a class="sourceLine" id="cb44-16" data-line-number="16"><span class="co">#&gt; Error in check_prob(c(0.33, 0.66)): </span></a>
<a class="sourceLine" id="cb44-17" data-line-number="17"><span class="co">#&gt; elements in &#39;prob&#39; must add up to 1</span></a></code></pre></div>
<p>Here’s the improved constructor function <code>coin()</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">sides =</span> <span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)) {</a>
<a class="sourceLine" id="cb45-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">length</span>(sides) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb45-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;sides&#39; must be of length 2&quot;</span>)</a>
<a class="sourceLine" id="cb45-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb45-5" data-line-number="5">  <span class="kw">check_prob</span>(prob)</a>
<a class="sourceLine" id="cb45-6" data-line-number="6">  res &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">sides =</span> sides, <span class="dt">prob =</span> prob)</a>
<a class="sourceLine" id="cb45-7" data-line-number="7">  <span class="kw">class</span>(res) &lt;-<span class="st"> &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb45-8" data-line-number="8">  <span class="kw">return</span>(res)</a>
<a class="sourceLine" id="cb45-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb45-10" data-line-number="10"></a>
<a class="sourceLine" id="cb45-11" data-line-number="11">coin1 &lt;-<span class="st"> </span><span class="kw">coin</span>()</a>
<a class="sourceLine" id="cb45-12" data-line-number="12">coin1</a>
<a class="sourceLine" id="cb45-13" data-line-number="13"><span class="co">#&gt; $sides</span></a>
<a class="sourceLine" id="cb45-14" data-line-number="14"><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></a>
<a class="sourceLine" id="cb45-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb45-16" data-line-number="16"><span class="co">#&gt; $prob</span></a>
<a class="sourceLine" id="cb45-17" data-line-number="17"><span class="co">#&gt; [1] 0.5 0.5</span></a>
<a class="sourceLine" id="cb45-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb45-19" data-line-number="19"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb45-20" data-line-number="20"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
</div>
</div>
<div id="print-method-for-coin" class="section level2">
<h2><span class="header-section-number">3.6</span> Print Method for <code>&quot;coin&quot;</code></h2>
<p>Every time you type in the name of an object <code>&quot;coin&quot;</code>, like our <code>penny</code> example, the output is displayed in a default, “quick and dirty”, way. R displays the values associated to the sides and their probabilities like any other list:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="co"># US penny</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2">penny &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;lincoln&quot;</span>, <span class="st">&quot;shield&quot;</span>))</a>
<a class="sourceLine" id="cb46-3" data-line-number="3">penny</a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="co">#&gt; $sides</span></a>
<a class="sourceLine" id="cb46-5" data-line-number="5"><span class="co">#&gt; [1] &quot;lincoln&quot; &quot;shield&quot; </span></a>
<a class="sourceLine" id="cb46-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb46-7" data-line-number="7"><span class="co">#&gt; $prob</span></a>
<a class="sourceLine" id="cb46-8" data-line-number="8"><span class="co">#&gt; [1] 0.5 0.5</span></a>
<a class="sourceLine" id="cb46-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb46-10" data-line-number="10"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb46-11" data-line-number="11"><span class="co">#&gt; [1] &quot;coin&quot;</span></a></code></pre></div>
<p>Sometimes the default displayed output is all you need. However, there are occasions in which you need to customize the amount and format of information displayed on the screen when you type in the name of an object.</p>
<p>Instead of keeping the default printed values, it would be nice to print <code>penny</code> and see some output like this:</p>
<pre><code>object &quot;coin&quot;

        side  prob
1  &quot;lincoln&quot;   0.5
2   &quot;shield&quot;   0.5</code></pre>
<p>How can we do this? The answer involves writing a <code>print</code> method for objects of class <code>&quot;coin&quot;</code>. Because <code>print()</code> is actually a generic function, what you need to do is to create a a specific print <em>flavor</em> for class coin. Basically, you define a <code>print.coin()</code> function, and then include commands to print information in the desired way:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">print.coin &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb48-2" data-line-number="2">  <span class="kw">cat</span>(<span class="st">&#39;object &quot;coin&quot;</span><span class="ch">\n\n</span><span class="st">&#39;</span>)</a>
<a class="sourceLine" id="cb48-3" data-line-number="3">  cd &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb48-4" data-line-number="4">    <span class="dt">side =</span> x<span class="op">$</span>sides, <span class="dt">prob =</span> x<span class="op">$</span>prob</a>
<a class="sourceLine" id="cb48-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb48-6" data-line-number="6">  <span class="kw">print</span>(cd)</a>
<a class="sourceLine" id="cb48-7" data-line-number="7">  <span class="kw">invisible</span>(x)</a>
<a class="sourceLine" id="cb48-8" data-line-number="8">}</a></code></pre></div>
<p>Now, the next time you print the name of an object of class <code>&quot;coin&quot;</code>, R will look for a <code>print</code> method (which now exists) and dispatch such method.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">penny</a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="co">#&gt; object &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb49-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4"><span class="co">#&gt;      side prob</span></a>
<a class="sourceLine" id="cb49-5" data-line-number="5"><span class="co">#&gt; 1 lincoln  0.5</span></a>
<a class="sourceLine" id="cb49-6" data-line-number="6"><span class="co">#&gt; 2  shield  0.5</span></a></code></pre></div>
</div>
<div id="extending-classes" class="section level2">
<h2><span class="header-section-number">3.7</span> Extending classes</h2>
<p>We can extend the class <code>&quot;coin&quot;</code> and create a derived class for special types of coins. For instance, say we want to create a class <code>&quot;quarter&quot;</code>. One side of the coin refers to George Washington, while the other side refers to John Brown’s Fort:</p>
<p><a href="https://en.wikipedia.org/wiki/Quarter_(United_States_coin)" class="uri">https://en.wikipedia.org/wiki/Quarter_(United_States_coin)</a></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">quarter1 &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;washington&quot;</span>, <span class="st">&quot;fort&quot;</span>)) </a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="kw">class</span>(quarter1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;quarter&quot;</span>, <span class="st">&quot;coin&quot;</span>)</a>
<a class="sourceLine" id="cb50-3" data-line-number="3">quarter1</a>
<a class="sourceLine" id="cb50-4" data-line-number="4"><span class="co">#&gt; object &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb50-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb50-6" data-line-number="6"><span class="co">#&gt;         side prob</span></a>
<a class="sourceLine" id="cb50-7" data-line-number="7"><span class="co">#&gt; 1 washington  0.5</span></a>
<a class="sourceLine" id="cb50-8" data-line-number="8"><span class="co">#&gt; 2       fort  0.5</span></a></code></pre></div>
<p>Our coin <code>quarter1</code> inherits from <code>&quot;coin&quot;</code>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw">inherits</span>(quarter1, <span class="st">&quot;coin&quot;</span>)</a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>Likewise, we can create a class for a slightly unbalanced <code>&quot;dime&quot;</code>:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">dime1 &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;roosevelt&quot;</span>, <span class="st">&quot;torch&quot;</span>), <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.48</span>, <span class="fl">0.52</span>))</a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="kw">class</span>(dime1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dime&quot;</span>, <span class="st">&quot;coin&quot;</span>)</a>
<a class="sourceLine" id="cb52-3" data-line-number="3">dime1</a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="co">#&gt; object &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb52-6" data-line-number="6"><span class="co">#&gt;        side prob</span></a>
<a class="sourceLine" id="cb52-7" data-line-number="7"><span class="co">#&gt; 1 roosevelt 0.48</span></a>
<a class="sourceLine" id="cb52-8" data-line-number="8"><span class="co">#&gt; 2     torch 0.52</span></a></code></pre></div>
<p>Here’s another coin example, a <em>peso</em>, from Mexico (where I grew up). When you flip a <em>peso</em>, you have two sides: <em>aguila</em> (eagle) or <em>sol</em> (sun):</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">peso &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;aguila&quot;</span>, <span class="st">&quot;sol&quot;</span>)) </a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">class</span>(peso) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;peso&quot;</span>, <span class="st">&quot;coin&quot;</span>)</a>
<a class="sourceLine" id="cb53-3" data-line-number="3">peso</a>
<a class="sourceLine" id="cb53-4" data-line-number="4"><span class="co">#&gt; object &quot;coin&quot;</span></a>
<a class="sourceLine" id="cb53-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb53-6" data-line-number="6"><span class="co">#&gt;     side prob</span></a>
<a class="sourceLine" id="cb53-7" data-line-number="7"><span class="co">#&gt; 1 aguila  0.5</span></a>
<a class="sourceLine" id="cb53-8" data-line-number="8"><span class="co">#&gt; 2    sol  0.5</span></a></code></pre></div>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="function.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="methods1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["packyourcode.pdf", "packyourcode.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
