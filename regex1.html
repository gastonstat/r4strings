<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Handling Strings in R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Handling Strings in R">
  <meta name="generator" content="bookdown 0.1.16 and GitBook 2.6.7">

  <meta property="og:title" content="Handling Strings in R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="gastonstat/r4strings" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Handling Strings in R" />
  
  
  

<meta name="author" content="Gaston Sanchez">

  
<meta name="date" content="2017-10-28">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="basic-manipulation-examples.html">
<link rel="next" href="character-sets.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handling Strings in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#about-this-book"><i class="fa fa-check"></i><b>1.1</b> About this book</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#structure-of-the-book"><i class="fa fa-check"></i><b>1.1.1</b> Structure of the book</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#main-resources"><i class="fa fa-check"></i><b>1.1.2</b> Main Resources</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#acknowledgements"><i class="fa fa-check"></i><b>1.1.3</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.1.4" data-path="intro.html"><a href="intro.html#colophon"><i class="fa fa-check"></i><b>1.1.4</b> Colophon</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Characters</b></span></li>
<li class="chapter" data-level="2" data-path="chars.html"><a href="chars.html"><i class="fa fa-check"></i><b>2</b> Character Strings in R</a><ul>
<li class="chapter" data-level="2.1" data-path="chars.html"><a href="chars.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="chars.html"><a href="chars.html#common-use-of-strings-in-r"><i class="fa fa-check"></i><b>2.2</b> Common use of strings in R</a></li>
<li class="chapter" data-level="2.3" data-path="chars.html"><a href="chars.html#creating-character-strings"><i class="fa fa-check"></i><b>2.3</b> Creating Character Strings</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chars.html"><a href="chars.html#empty-string"><i class="fa fa-check"></i><b>2.3.1</b> Empty string</a></li>
<li class="chapter" data-level="2.3.2" data-path="chars.html"><a href="chars.html#empty-character-vector"><i class="fa fa-check"></i><b>2.3.2</b> Empty character vector</a></li>
<li class="chapter" data-level="2.3.3" data-path="chars.html"><a href="chars.html#function-c"><i class="fa fa-check"></i><b>2.3.3</b> Function <code>c()</code></a></li>
<li class="chapter" data-level="2.3.4" data-path="chars.html"><a href="chars.html#is.character-and-as.character"><i class="fa fa-check"></i><b>2.3.4</b> <code>is.character()</code> and <code>as.character()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chars.html"><a href="chars.html#behavior-of-r-objects-with-character-strings"><i class="fa fa-check"></i><b>2.4</b> Behavior of R objects with character strings</a></li>
<li class="chapter" data-level="2.5" data-path="chars.html"><a href="chars.html#the-workhorse-function-paste"><i class="fa fa-check"></i><b>2.5</b> The workhorse function <code>paste()</code></a></li>
<li class="chapter" data-level="2.6" data-path="chars.html"><a href="chars.html#exercises"><i class="fa fa-check"></i><b>2.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Formatting</b></span></li>
<li class="chapter" data-level="3" data-path="formatting.html"><a href="formatting.html"><i class="fa fa-check"></i><b>3</b> Formatting Text and Numbers</a><ul>
<li class="chapter" data-level="3.1" data-path="formatting.html"><a href="formatting.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="formatting.html"><a href="formatting.html#printing-and-formatting"><i class="fa fa-check"></i><b>3.2</b> Printing and formatting</a></li>
<li class="chapter" data-level="3.3" data-path="formatting.html"><a href="formatting.html#generic-printing"><i class="fa fa-check"></i><b>3.3</b> Generic printing</a><ul>
<li class="chapter" data-level="3.3.1" data-path="formatting.html"><a href="formatting.html#when-to-use-print"><i class="fa fa-check"></i><b>3.3.1</b> When to use <code>print()</code>?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="formatting.html"><a href="formatting.html#concatenate-and-print-with-cat"><i class="fa fa-check"></i><b>3.4</b> Concatenate and print with <code>cat()</code></a></li>
<li class="chapter" data-level="3.5" data-path="formatting.html"><a href="formatting.html#encoding-strings-with-format"><i class="fa fa-check"></i><b>3.5</b> Encoding strings with <code>format()</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="c-style-formatting.html"><a href="c-style-formatting.html"><i class="fa fa-check"></i><b>4</b> C-style Formatting</a><ul>
<li class="chapter" data-level="4.1" data-path="c-style-formatting.html"><a href="c-style-formatting.html#c-style-formatting-options"><i class="fa fa-check"></i><b>4.1</b> C-style formatting options</a><ul>
<li class="chapter" data-level="4.1.1" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-basic-sprintf"><i class="fa fa-check"></i><b>4.1.1</b> Example: basic <code>sprintf()</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-file-names"><i class="fa fa-check"></i><b>4.1.2</b> Example: File Names</a></li>
<li class="chapter" data-level="4.1.3" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-fahrenheit-to-celsius"><i class="fa fa-check"></i><b>4.1.3</b> Example: Fahrenheit to Celsius</a></li>
<li class="chapter" data-level="4.1.4" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-car-traveled-distance"><i class="fa fa-check"></i><b>4.1.4</b> Example: Car Traveled Distance</a></li>
<li class="chapter" data-level="4.1.5" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-coffee-prices"><i class="fa fa-check"></i><b>4.1.5</b> Example: Coffee Prices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="input-and-output.html"><a href="input-and-output.html"><i class="fa fa-check"></i><b>5</b> Input and Output</a><ul>
<li class="chapter" data-level="5.1" data-path="input-and-output.html"><a href="input-and-output.html#output"><i class="fa fa-check"></i><b>5.1</b> Output</a><ul>
<li class="chapter" data-level="5.1.1" data-path="input-and-output.html"><a href="input-and-output.html#concatenating-output"><i class="fa fa-check"></i><b>5.1.1</b> Concatenating output</a></li>
<li class="chapter" data-level="5.1.2" data-path="input-and-output.html"><a href="input-and-output.html#sinking-output"><i class="fa fa-check"></i><b>5.1.2</b> Sinking output</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="input-and-output.html"><a href="input-and-output.html#exporting-tables"><i class="fa fa-check"></i><b>5.2</b> Exporting tables</a></li>
</ul></li>
<li class="part"><span><b>Manipulations</b></span></li>
<li class="chapter" data-level="6" data-path="manip.html"><a href="manip.html"><i class="fa fa-check"></i><b>6</b> Basic String Manipulations</a><ul>
<li class="chapter" data-level="6.1" data-path="manip.html"><a href="manip.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="manip.html"><a href="manip.html#basic-manipulations"><i class="fa fa-check"></i><b>6.2</b> Basic Manipulations</a></li>
<li class="chapter" data-level="6.3" data-path="manip.html"><a href="manip.html#counting-characters"><i class="fa fa-check"></i><b>6.3</b> Counting characters</a></li>
<li class="chapter" data-level="6.4" data-path="manip.html"><a href="manip.html#casefolding"><i class="fa fa-check"></i><b>6.4</b> Casefolding</a></li>
<li class="chapter" data-level="6.5" data-path="manip.html"><a href="manip.html#translating-characters"><i class="fa fa-check"></i><b>6.5</b> Translating characters</a></li>
<li class="chapter" data-level="6.6" data-path="manip.html"><a href="manip.html#abbreviating-strings"><i class="fa fa-check"></i><b>6.6</b> Abbreviating strings</a></li>
<li class="chapter" data-level="6.7" data-path="manip.html"><a href="manip.html#replacing-strings"><i class="fa fa-check"></i><b>6.7</b> Replacing strings</a></li>
<li class="chapter" data-level="6.8" data-path="manip.html"><a href="manip.html#set-operations"><i class="fa fa-check"></i><b>6.8</b> Set Operations</a><ul>
<li class="chapter" data-level="6.8.1" data-path="manip.html"><a href="manip.html#set-union-with-union"><i class="fa fa-check"></i><b>6.8.1</b> Set union with <code>union()</code></a></li>
<li class="chapter" data-level="6.8.2" data-path="manip.html"><a href="manip.html#set-intersection-with-intersect"><i class="fa fa-check"></i><b>6.8.2</b> Set intersection with <code>intersect()</code></a></li>
<li class="chapter" data-level="6.8.3" data-path="manip.html"><a href="manip.html#set-difference-with-setdiff"><i class="fa fa-check"></i><b>6.8.3</b> Set difference with <code>setdiff()</code></a></li>
<li class="chapter" data-level="6.8.4" data-path="manip.html"><a href="manip.html#set-equality-with-setequal"><i class="fa fa-check"></i><b>6.8.4</b> Set equality with <code>setequal()</code></a></li>
<li class="chapter" data-level="6.8.5" data-path="manip.html"><a href="manip.html#exact-equality-with-identical"><i class="fa fa-check"></i><b>6.8.5</b> Exact equality with <code>identical()</code></a></li>
<li class="chapter" data-level="6.8.6" data-path="manip.html"><a href="manip.html#element-contained-with-is.element"><i class="fa fa-check"></i><b>6.8.6</b> Element contained with <code>is.element()</code></a></li>
<li class="chapter" data-level="6.8.7" data-path="manip.html"><a href="manip.html#sorting-with-sort"><i class="fa fa-check"></i><b>6.8.7</b> Sorting with <code>sort()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stringr-basics.html"><a href="stringr-basics.html"><i class="fa fa-check"></i><b>7</b> Stringr Basics</a><ul>
<li class="chapter" data-level="7.1" data-path="stringr-basics.html"><a href="stringr-basics.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="stringr-basics.html"><a href="stringr-basics.html#package-stringr"><i class="fa fa-check"></i><b>7.2</b> Package <code>stringr</code></a></li>
<li class="chapter" data-level="7.3" data-path="stringr-basics.html"><a href="stringr-basics.html#basic-string-operations"><i class="fa fa-check"></i><b>7.3</b> Basic String Operations</a><ul>
<li class="chapter" data-level="7.3.1" data-path="stringr-basics.html"><a href="stringr-basics.html#concatenating-with-str_c"><i class="fa fa-check"></i><b>7.3.1</b> Concatenating with <code>str_c()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="stringr-basics.html"><a href="stringr-basics.html#number-of-characters-with-str_length"><i class="fa fa-check"></i><b>7.3.2</b> Number of characters with <code>str_length()</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="stringr-basics.html"><a href="stringr-basics.html#substring-with-str_sub"><i class="fa fa-check"></i><b>7.3.3</b> Substring with <code>str_sub()</code></a></li>
<li class="chapter" data-level="7.3.4" data-path="stringr-basics.html"><a href="stringr-basics.html#duplication-with-str_dup"><i class="fa fa-check"></i><b>7.3.4</b> Duplication with <code>str_dup()</code></a></li>
<li class="chapter" data-level="7.3.5" data-path="stringr-basics.html"><a href="stringr-basics.html#padding-with-str_pad"><i class="fa fa-check"></i><b>7.3.5</b> Padding with <code>str_pad()</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="stringr-basics.html"><a href="stringr-basics.html#wrapping-with-str_wrap"><i class="fa fa-check"></i><b>7.3.6</b> Wrapping with <code>str_wrap()</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="stringr-basics.html"><a href="stringr-basics.html#trimming-with-str_trim"><i class="fa fa-check"></i><b>7.3.7</b> Trimming with <code>str_trim()</code></a></li>
<li class="chapter" data-level="7.3.8" data-path="stringr-basics.html"><a href="stringr-basics.html#word-extraction-with-word"><i class="fa fa-check"></i><b>7.3.8</b> Word extraction with <code>word()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html"><i class="fa fa-check"></i><b>8</b> Basic Manipulation Examples</a><ul>
<li class="chapter" data-level="8.1" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#introduction-4"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-names-of-files"><i class="fa fa-check"></i><b>8.1.1</b> Example: Names of files</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-valid-color-names"><i class="fa fa-check"></i><b>8.1.2</b> Example: Valid Color Names</a></li>
<li class="chapter" data-level="8.1.3" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-me-and-you-plot"><i class="fa fa-check"></i><b>8.1.3</b> Example: Me and You plot</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Regex</b></span></li>
<li class="chapter" data-level="9" data-path="regex1.html"><a href="regex1.html"><i class="fa fa-check"></i><b>9</b> Regular Expressions</a><ul>
<li class="chapter" data-level="9.1" data-path="regex1.html"><a href="regex1.html#introduction-5"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="regex1.html"><a href="regex1.html#what-are-regular-expressions"><i class="fa fa-check"></i><b>9.2</b> What are Regular Expressions?</a><ul>
<li class="chapter" data-level="9.2.1" data-path="regex1.html"><a href="regex1.html#what-are-regular-expressions-used-for"><i class="fa fa-check"></i><b>9.2.1</b> What are Regular Expressions used for?</a></li>
<li class="chapter" data-level="9.2.2" data-path="regex1.html"><a href="regex1.html#a-word-of-caution-about-regex"><i class="fa fa-check"></i><b>9.2.2</b> A word of caution about regex</a></li>
<li class="chapter" data-level="9.2.3" data-path="regex1.html"><a href="regex1.html#regular-expressions-in-r"><i class="fa fa-check"></i><b>9.2.3</b> Regular Expressions in R</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regex1.html"><a href="regex1.html#regex-basics"><i class="fa fa-check"></i><b>9.3</b> Regex Basics</a></li>
<li class="chapter" data-level="9.4" data-path="regex1.html"><a href="regex1.html#matching-literal-characters"><i class="fa fa-check"></i><b>9.4</b> Matching Literal Characters</a></li>
<li class="chapter" data-level="9.5" data-path="regex1.html"><a href="regex1.html#metacharacters"><i class="fa fa-check"></i><b>9.5</b> Metacharacters</a><ul>
<li class="chapter" data-level="9.5.1" data-path="regex1.html"><a href="regex1.html#the-wild-metacharacter"><i class="fa fa-check"></i><b>9.5.1</b> The Wild Metacharacter</a></li>
<li class="chapter" data-level="9.5.2" data-path="regex1.html"><a href="regex1.html#escaping-metacharacters"><i class="fa fa-check"></i><b>9.5.2</b> Escaping metacharacters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="character-sets.html"><a href="character-sets.html"><i class="fa fa-check"></i><b>10</b> Character Sets</a><ul>
<li class="chapter" data-level="10.1" data-path="character-sets.html"><a href="character-sets.html#defining-character-sets"><i class="fa fa-check"></i><b>10.1</b> Defining character sets</a></li>
<li class="chapter" data-level="10.2" data-path="character-sets.html"><a href="character-sets.html#character-ranges"><i class="fa fa-check"></i><b>10.2</b> Character ranges</a></li>
<li class="chapter" data-level="10.3" data-path="character-sets.html"><a href="character-sets.html#negative-character-sets"><i class="fa fa-check"></i><b>10.3</b> Negative Character Sets</a></li>
<li class="chapter" data-level="10.4" data-path="character-sets.html"><a href="character-sets.html#metacharacters-inside-character-sets"><i class="fa fa-check"></i><b>10.4</b> Metacharacters inside character sets</a></li>
<li class="chapter" data-level="10.5" data-path="character-sets.html"><a href="character-sets.html#character-classes"><i class="fa fa-check"></i><b>10.5</b> Character Classes</a></li>
<li class="chapter" data-level="10.6" data-path="character-sets.html"><a href="character-sets.html#posix-character-classes"><i class="fa fa-check"></i><b>10.6</b> POSIX Character Classes</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handling Strings in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regex1" class="section level1">
<h1><span class="header-section-number">9</span> Regular Expressions</h1>
<div id="introduction-5" class="section level2">
<h2><span class="header-section-number">9.1</span> Introduction</h2>
<p>So far you have learned some basic and intermediate functions for handling and working with text in R. These are very useful functions and they allow you to do many interesting things. However, if you truly want to unleash the power of strings manipulation, you need to take things to the next level and learn about <em>regular expressions</em>.</p>
</div>
<div id="what-are-regular-expressions" class="section level2">
<h2><span class="header-section-number">9.2</span> What are Regular Expressions?</h2>
<p>The name “Regular Expression” does not say much. However, regular expressions are all about text. Think about how much text is all around you in our modern digital world: email, text messages, news articles, blogs, computer code, contacts in your address book—all these things are text. Regular expressions are a tool that allows us to work with these text by describing text patterns.</p>
<p>A <strong>regular expression</strong> is a special text string for describing a certain amount of text. This “certain amount of text” receives the formal name of <em>pattern</em>. In other words, a regular expression is a set of symbols that describes a text pattern. More formally we say that a regular expression is a <em>pattern that describes a set of strings</em>. In addition to this first meaning, the term regular expression can also be used in a slightly different but related way: as the formal language of these symbols that needs to be interpreted by a regular expression processor. Because the term “regular expression” is rather long, most people use the word <strong>regex</strong> as a shortcut term. And you will even find the plural <em>regexes</em>.</p>
<p>It is also worth noting what regular expressions are not. They’re not a programming language. They may look like some sort of programming language because they are a formal language with a defined set of rules that gets a computer to do what we want it to do. However, there are no variables in regex and you can’t do computations like adding 1 + 1.</p>
<div id="what-are-regular-expressions-used-for" class="section level3">
<h3><span class="header-section-number">9.2.1</span> What are Regular Expressions used for?</h3>
<p>We use regular expressions to work with text. Some of its common uses involve testing if a phone number has the correct number of digits, if a date follows a specifc format (e.g. mm/dd/yy), if an email address is in a valid format, or if a password has numbers and special characters. You could also use regular expressions to search a document for <em>gray</em> spelt either as “gray” or “grey”. You could search a document and replace all occurrences of “Will”, “Bill”, or “W.” with William. Or you could count the number of times in a document that the word “analysis” is immediately preceded by the words “data”, “computer” or “statistical” only in those cases. You could use it to convert a comma-delimited file into a tab-delimited file or to find duplicate words in a text.</p>
<p>In each of these cases, you are going to use a regular expression to write up a description of what you are looking for using symbols. In the case of a phone number, that pattern might be three digits followed by a dash, followed by three digits and another dash, followed by four digits. Once you have defined a pattern then the regex processor will use our description to return matching results, or in the case of the test, to return true or false for whether or not it matched.</p>
</div>
<div id="a-word-of-caution-about-regex" class="section level3">
<h3><span class="header-section-number">9.2.2</span> A word of caution about regex</h3>
<p>If you have never used regular expressions before, their syntax may seem a bit scary and cryptic. You will see strings formed by a bunch of letters, digits, and other punctuation symbols combined in seemingly nonsensical ways. As with any other topic that has to do with programming and data analysis, learning the principles of regex and becoming fluent in defining regex patterns takes time and requires a lot of practice. The more you use them, the better you will become at defining more complex patterns and getting the most out of them.</p>
<p>Regular Expressions is a wide topic and there are books entirely dedicated to this subject. The material offered in this book is not extensive and there are many subtopics that I don’t cover here. Despite the initial barriers that you may encounter when entering the regex world, the pain and frustration of learning this tool will payoff in your data science career.</p>
</div>
<div id="regular-expressions-in-r" class="section level3">
<h3><span class="header-section-number">9.2.3</span> Regular Expressions in R</h3>
<p>Tools for working with regular expressions can be found in virtually all scripting languages (e.g. Perl, Python, Java, Ruby, etc). R has some functions for working with regular expressions but it does not provide the wide range of capabilities that other scripting languages do. Nevertheless, they can take you very far with some workarounds (and a bit of patience).</p>
<p>One of the best tools you must have in your toolkit is the R package <code>&quot;stringr&quot;</code> (by Hadley Wickham). It provides functions that have similar behavior to those of the base distribution in R. But it also provides many more facilities for working with regular expressions.</p>
</div>
</div>
<div id="regex-basics" class="section level2">
<h2><span class="header-section-number">9.3</span> Regex Basics</h2>
<p>The main purpose of working with regular expressions is to describe patterns that are used to match against text strings. Simply put, working with regular expressions is nothing more than <strong>pattern matching</strong>. The result of a match is either successful or not.</p>
<p>The simplest version of pattern matching is to search for one occurrence (or all occurrences) of some specific characters in a string. For example, we might want to search for the word <code>&quot;programming&quot;</code> in a large text document, or we might want to search for all occurrences of the string <code>&quot;apply&quot;</code> in a series of files containing R scripts.</p>
<p>Typically, regular expression patterns consist of a combination of alphanumeric characters as well as special characters. A regex pattern can be as simple as a single character, or it can be formed by several characters with a more complex structure. In all cases we construct regular expressions much in the same form in which we construct arithmetic expressions, by using various operators to combine smaller expressions.</p>
</div>
<div id="matching-literal-characters" class="section level2">
<h2><span class="header-section-number">9.4</span> Matching Literal Characters</h2>
<p>We’re going to start with the simplest match of all: a literal character. A literal character match is one in which a given character such as the letter <code>&quot;R&quot;</code> matches the letter <em>R</em>. This type of match is the most basic type of regular expression operation: just matching plain text.</p>
<p>The following examples are extremely basic but they will help you get a good understanding of regex.</p>
<p>Consider the following text stored in a character vector <code>this_book</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">this_book &lt;-<span class="st"> &#39;This book is mine&#39;</span></code></pre></div>
<p>The first regular expression we are going to work with is <code>&quot;book&quot;</code>. This pattern is formed by a letter <em>b</em>, followed by a letter <em>o</em>, followed by another letter <em>o</em>, followed by a letter <em>k</em>. As you may guess, this pattern matches the word <em>book</em> in the character vector <code>this_book</code>. To have a visual representation of the actual pattern that is matched, you should use the function <code>str_view()</code> from the package <code>&quot;stringr&quot;</code> (you may need to upgrade to a recent version of RStudio):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(this_book, <span class="st">&#39;book&#39;</span>)</code></pre></div>
<p>As you can tell, the pattern <code>&quot;book&quot;</code> doesn’t match the entire content in the vector <code>this_book</code>; it just matches those four letters.</p>
<p>It may seem really simple but there are a couple of details to be highlighted. The first is that regex searches are case sensitive by default. This means that the pattern <code>&quot;Book&quot;</code> would not match <em>book</em> in <code>this_book</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(<span class="st">&quot;This Book is mine.&quot;</span>, <span class="st">&#39;book&#39;</span>)</code></pre></div>
<p>You can change the matching task so that it is case insensitive but we will talk about it later.</p>
<p>Let’s add more text to <code>this_book</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">this_book &lt;-<span class="st"> &#39;This book is mine. I wrote this book with bookdown.&#39;</span></code></pre></div>
<p>Let’s use <code>str_view()</code> to see what pieces of text are matched in <code>this_book</code> with the pattern <code>&quot;book&quot;</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(this_book, <span class="st">&quot;book&quot;</span>)</code></pre></div>
<p>As you can tell, only the first occurrence of <em>book</em> was matched. This is a common behavior of regular expressions in which they return a match as fast possible. You can think of this behavior as the “eager principle”, that is, regular expressions are eager and they will give preference to an early match. This is a minor but important detail and we will come back to this behavior of regular expressions.</p>
<p>All the letters and digits in the English alphabet are considered literal characters. They are called <em>literal</em> because they match themselves.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">str_view &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;I had 3 quesadillas for lunch&quot;</span>, <span class="st">&quot;3&quot;</span>)</code></pre></div>
<p>Here is another example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">transport &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;car&quot;</span>, <span class="st">&quot;bike&quot;</span>, <span class="st">&quot;boat&quot;</span>, <span class="st">&quot;airplane&quot;</span>)</code></pre></div>
<p>The first pattern to test is the letter <code>&quot;a&quot;</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(transport, <span class="st">&quot;a&quot;</span>)</code></pre></div>
<p>When you execute the previous command, you should be able to see that the letter <code>&quot;a&quot;</code> is highlighted in the words <em>car</em>, <em>boat</em> and <em>airplane</em>.</p>
</div>
<div id="metacharacters" class="section level2">
<h2><span class="header-section-number">9.5</span> Metacharacters</h2>
<p>The next topic that you should learn about regular expressions has to do with <strong>metacharacters</strong>. As you just learned, the most basic type of regular expressions are the literal characters which are characters that match themselves. However, not all characters match themselves. Any character that is not a literal character is a metacharacter. This type of characters have a special meaning and they allow you to transform literal characters in very powerful ways.</p>
<p>Below is the list of metacharacters in <em>Extended Regular Expressions</em> (EREs):</p>
<pre><code>.   \   |   (   )   [   ]   {   }   $   -    ^   *   +   ?</code></pre>
<ul>
<li>the dot <code>.</code></li>
<li>the backslash <code>\</code></li>
<li>the bar <code>|</code></li>
<li>left or opening parenthesis <code>(</code></li>
<li>right or closing parenthesis <code>)</code></li>
<li>left or opening bracket <code>[</code></li>
<li>right or closing bracket <code>]</code></li>
<li>left or opening brace <code>{</code></li>
<li>right or closing brace <code>}</code></li>
<li>the dollar sign <code>$</code></li>
<li>the dash, hyphen or minus sign <code>-</code></li>
<li>the caret or hat <code>^</code></li>
<li>the star or asterisk <code>*</code></li>
<li>the plus sign <code>+</code></li>
<li>the question mark <code>?</code></li>
</ul>
<p>We’re going to be working with these characters throughout the rest of the book. Simply put, everything else that you need to know about regular expressions besides literal characters is how these metacharacters work. The good news is that there are only a few metacharacters to learn. The bad news is that some metacharacters can have more than one meaning. And learning those meanings definitely takes time and requires hours of practice. The meaning of the metacharacters greatly depend on the context in which you use them, how you use them, and where you use them. If it wasn’t enough complication, it is also the metacharacters that have variation between the different regex engines.</p>
<div id="the-wild-metacharacter" class="section level3">
<h3><span class="header-section-number">9.5.1</span> The Wild Metacharacter</h3>
<p>The first metacharacter you should learn about is the dot or period <code>&quot;.&quot;</code>, better known as the <strong>wild</strong> metacharacter. This metacharacter is used to match <strong>ANY</strong> character except for a new line.</p>
<p>For example, consider the pattern <code>&quot;p.n&quot;</code>, that is, <em>p wildcard n</em>. This pattern will match <em>pan</em>, <em>pen</em>, and <em>pin</em>, but it will not match <em>prun</em> or <em>plan</em>. The dot only matches one single character.</p>
<p>Let’s see another example using the vector <code>c(&quot;not&quot;, &quot;note&quot;, &quot;knot&quot;, &quot;nut&quot;)</code> and the pattern <code>&quot;n.t&quot;</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;not&quot;</span>, <span class="st">&quot;note&quot;</span>, <span class="st">&quot;knot&quot;</span>, <span class="st">&quot;nut&quot;</span>)

<span class="kw">str_view</span>(not, <span class="st">&quot;n.t&quot;</span>)</code></pre></div>
<p>the pattern <code>&quot;n.t&quot;</code> matches <em>not</em> in the first three elements, and <em>nut</em> in the last element.</p>
<p>If you specify a pattern <code>&quot;no.&quot;</code>, then just the first three elements in <code>not</code> will be matched.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(not, <span class="st">&quot;no.&quot;</span>)</code></pre></div>
<p>And if you define a pattern <code>&quot;kn.&quot;</code>, then only the third element is matched.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(not, <span class="st">&quot;kn.&quot;</span>)</code></pre></div>
<p>The wild metacharacter is probably the most used metacharacter, and it is also the most abused one, being the source of many mistakes. Here is a basic example with the regular expression formed by <code>&quot;5.00&quot;</code>. If you think that this pattern will match five with two decimal places after it, you will be surprised to find out that it not only matches <em>5.00</em> but also <em>5100</em> and <em>5-00</em>. Why? Because <code>&quot;.&quot;</code> is the metacharacter that matches absolutely anything. You will learn how to fix this mistake in the next section, but it illustrates an important fact about regular expressions: the challenge consists of matching what you want, but also in matching only what you want. You don’t want to specify a pattern that is overly permissive. You want to find the thing you’re looking for, but only that thing.</p>
</div>
<div id="escaping-metacharacters" class="section level3">
<h3><span class="header-section-number">9.5.2</span> Escaping metacharacters</h3>
<p>What if you just want to match the character dot? For example, say you have the following vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fives &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;5.00&quot;</span>, <span class="st">&quot;5100&quot;</span>, <span class="st">&quot;5-00&quot;</span>, <span class="st">&quot;5 00&quot;</span>)</code></pre></div>
<p>If you try the pattern <code>&quot;5.00&quot;</code>, it will match all of the elements in <code>fives</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(fives, <span class="st">&quot;5.00&quot;</span>)</code></pre></div>
<p>To actually match the dot character, what you need to do is <strong>escape</strong> the metacharacter. In most languages, the way to escape a metacharacter is by adding a backslash character in front of the metacharacter: <code>&quot;\.&quot;</code>. When you use a backslash in front of a metacharacter you are “escaping” the character, this means that the character no longer has a special meaning, and it will match itself.</p>
<p>However, R is a bit different. Instead of using a backslash you have to use two backslashes: <code>&quot;5\\.00&quot;</code>. This is because the backslash <code>&quot;\&quot;</code>, which is another metacharacter, has a special meaning in R. Therefore, to match just the element <em>5.00</em> in <code>fives</code> in R, you do it like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(fives, <span class="st">&quot;5</span><span class="ch">\\</span><span class="st">.00&quot;</span>)</code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-manipulation-examples.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="character-sets.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/gastonstat/r4strings/edit/master/regex1.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
