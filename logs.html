<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Handling Strings with R</title>
  <meta name="description" content="This book aims to provide a panoramic perspective of the wide array of string manipulations that you can perform with R. If you are new to R, or lack experience working with character data, this book will help you get started with the basics of handling strings. Likewise, if you are already familiar with R, you will find material that shows you how to do more advanced string and text processing operations.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Handling Strings with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://gastonsanchez.com/r4strings/" />
  
  <meta property="og:description" content="This book aims to provide a panoramic perspective of the wide array of string manipulations that you can perform with R. If you are new to R, or lack experience working with character data, this book will help you get started with the basics of handling strings. Likewise, if you are already familiar with R, you will find material that shows you how to do more advanced string and text processing operations." />
  <meta name="github-repo" content="gastonstat/r4strings" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Handling Strings with R" />
  
  <meta name="twitter:description" content="This book aims to provide a panoramic perspective of the wide array of string manipulations that you can perform with R. If you are new to R, or lack experience working with character data, this book will help you get started with the basics of handling strings. Likewise, if you are already familiar with R, you will find material that shows you how to do more advanced string and text processing operations." />
  

<meta name="author" content="Gaston Sanchez">


<meta name="date" content="2018-04-08">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="html.html">
<link rel="next" href="biomed.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handling Strings with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#about-this-book"><i class="fa fa-check"></i><b>1.1</b> About this book</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#structure-of-the-book"><i class="fa fa-check"></i><b>1.1.1</b> Structure of the book</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#main-resources"><i class="fa fa-check"></i><b>1.1.2</b> Main Resources</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#acknowledgements"><i class="fa fa-check"></i><b>1.1.3</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.1.4" data-path="intro.html"><a href="intro.html#colophon"><i class="fa fa-check"></i><b>1.1.4</b> Colophon</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Characters</b></span></li>
<li class="chapter" data-level="2" data-path="chars.html"><a href="chars.html"><i class="fa fa-check"></i><b>2</b> Character Strings in R</a><ul>
<li class="chapter" data-level="2.1" data-path="chars.html"><a href="chars.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="chars.html"><a href="chars.html#common-use-of-strings-in-r"><i class="fa fa-check"></i><b>2.2</b> Common use of strings in R</a></li>
<li class="chapter" data-level="2.3" data-path="chars.html"><a href="chars.html#creating-character-strings"><i class="fa fa-check"></i><b>2.3</b> Creating Character Strings</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chars.html"><a href="chars.html#empty-string"><i class="fa fa-check"></i><b>2.3.1</b> Empty string</a></li>
<li class="chapter" data-level="2.3.2" data-path="chars.html"><a href="chars.html#empty-character-vector"><i class="fa fa-check"></i><b>2.3.2</b> Empty character vector</a></li>
<li class="chapter" data-level="2.3.3" data-path="chars.html"><a href="chars.html#function-c"><i class="fa fa-check"></i><b>2.3.3</b> Function <code>c()</code></a></li>
<li class="chapter" data-level="2.3.4" data-path="chars.html"><a href="chars.html#is.character-and-as.character"><i class="fa fa-check"></i><b>2.3.4</b> <code>is.character()</code> and <code>as.character()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chars.html"><a href="chars.html#behavior-of-r-objects-with-character-strings"><i class="fa fa-check"></i><b>2.4</b> Behavior of R objects with character strings</a></li>
<li class="chapter" data-level="2.5" data-path="chars.html"><a href="chars.html#the-workhorse-function-paste"><i class="fa fa-check"></i><b>2.5</b> The workhorse function <code>paste()</code></a></li>
<li class="chapter" data-level="2.6" data-path="chars.html"><a href="chars.html#exercises"><i class="fa fa-check"></i><b>2.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Formatting</b></span></li>
<li class="chapter" data-level="3" data-path="formatting.html"><a href="formatting.html"><i class="fa fa-check"></i><b>3</b> Formatting Text and Numbers</a><ul>
<li class="chapter" data-level="3.1" data-path="formatting.html"><a href="formatting.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="formatting.html"><a href="formatting.html#printing-and-formatting"><i class="fa fa-check"></i><b>3.2</b> Printing and formatting</a></li>
<li class="chapter" data-level="3.3" data-path="formatting.html"><a href="formatting.html#generic-printing"><i class="fa fa-check"></i><b>3.3</b> Generic printing</a><ul>
<li class="chapter" data-level="3.3.1" data-path="formatting.html"><a href="formatting.html#when-to-use-print"><i class="fa fa-check"></i><b>3.3.1</b> When to use <code>print()</code>?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="formatting.html"><a href="formatting.html#concatenate-and-print-with-cat"><i class="fa fa-check"></i><b>3.4</b> Concatenate and print with <code>cat()</code></a></li>
<li class="chapter" data-level="3.5" data-path="formatting.html"><a href="formatting.html#encoding-strings-with-format"><i class="fa fa-check"></i><b>3.5</b> Encoding strings with <code>format()</code></a></li>
<li class="chapter" data-level="3.6" data-path="formatting.html"><a href="formatting.html#exercises-1"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="c-style-formatting.html"><a href="c-style-formatting.html"><i class="fa fa-check"></i><b>4</b> C-style Formatting</a><ul>
<li class="chapter" data-level="4.1" data-path="c-style-formatting.html"><a href="c-style-formatting.html#c-style-formatting-options"><i class="fa fa-check"></i><b>4.1</b> C-style formatting options</a><ul>
<li class="chapter" data-level="4.1.1" data-path="c-style-formatting.html"><a href="c-style-formatting.html#format-slot-syntax"><i class="fa fa-check"></i><b>4.1.1</b> Format Slot Syntax</a></li>
<li class="chapter" data-level="4.1.2" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-basic-sprintf"><i class="fa fa-check"></i><b>4.1.2</b> Example: basic <code>sprintf()</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-file-names"><i class="fa fa-check"></i><b>4.1.3</b> Example: File Names</a></li>
<li class="chapter" data-level="4.1.4" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-fahrenheit-to-celsius"><i class="fa fa-check"></i><b>4.1.4</b> Example: Fahrenheit to Celsius</a></li>
<li class="chapter" data-level="4.1.5" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-car-traveled-distance"><i class="fa fa-check"></i><b>4.1.5</b> Example: Car Traveled Distance</a></li>
<li class="chapter" data-level="4.1.6" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-coffee-prices"><i class="fa fa-check"></i><b>4.1.6</b> Example: Coffee Prices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="input-and-output.html"><a href="input-and-output.html"><i class="fa fa-check"></i><b>5</b> Input and Output</a><ul>
<li class="chapter" data-level="5.1" data-path="input-and-output.html"><a href="input-and-output.html#output"><i class="fa fa-check"></i><b>5.1</b> Output</a><ul>
<li class="chapter" data-level="5.1.1" data-path="input-and-output.html"><a href="input-and-output.html#concatenating-output"><i class="fa fa-check"></i><b>5.1.1</b> Concatenating output</a></li>
<li class="chapter" data-level="5.1.2" data-path="input-and-output.html"><a href="input-and-output.html#sinking-output"><i class="fa fa-check"></i><b>5.1.2</b> Sinking output</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="input-and-output.html"><a href="input-and-output.html#exporting-tables"><i class="fa fa-check"></i><b>5.2</b> Exporting tables</a></li>
</ul></li>
<li class="part"><span><b>III Manipulations</b></span></li>
<li class="chapter" data-level="6" data-path="manip.html"><a href="manip.html"><i class="fa fa-check"></i><b>6</b> Basic String Manipulations</a><ul>
<li class="chapter" data-level="6.1" data-path="manip.html"><a href="manip.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="manip.html"><a href="manip.html#basic-manipulations"><i class="fa fa-check"></i><b>6.2</b> Basic Manipulations</a></li>
<li class="chapter" data-level="6.3" data-path="manip.html"><a href="manip.html#counting-characters"><i class="fa fa-check"></i><b>6.3</b> Counting characters</a></li>
<li class="chapter" data-level="6.4" data-path="manip.html"><a href="manip.html#casefolding"><i class="fa fa-check"></i><b>6.4</b> Casefolding</a></li>
<li class="chapter" data-level="6.5" data-path="manip.html"><a href="manip.html#translating-characters"><i class="fa fa-check"></i><b>6.5</b> Translating characters</a></li>
<li class="chapter" data-level="6.6" data-path="manip.html"><a href="manip.html#abbreviating-strings"><i class="fa fa-check"></i><b>6.6</b> Abbreviating strings</a></li>
<li class="chapter" data-level="6.7" data-path="manip.html"><a href="manip.html#replacing-strings"><i class="fa fa-check"></i><b>6.7</b> Replacing strings</a></li>
<li class="chapter" data-level="6.8" data-path="manip.html"><a href="manip.html#set-operations"><i class="fa fa-check"></i><b>6.8</b> Set Operations</a><ul>
<li class="chapter" data-level="6.8.1" data-path="manip.html"><a href="manip.html#set-union-with-union"><i class="fa fa-check"></i><b>6.8.1</b> Set union with <code>union()</code></a></li>
<li class="chapter" data-level="6.8.2" data-path="manip.html"><a href="manip.html#set-intersection-with-intersect"><i class="fa fa-check"></i><b>6.8.2</b> Set intersection with <code>intersect()</code></a></li>
<li class="chapter" data-level="6.8.3" data-path="manip.html"><a href="manip.html#set-difference-with-setdiff"><i class="fa fa-check"></i><b>6.8.3</b> Set difference with <code>setdiff()</code></a></li>
<li class="chapter" data-level="6.8.4" data-path="manip.html"><a href="manip.html#set-equality-with-setequal"><i class="fa fa-check"></i><b>6.8.4</b> Set equality with <code>setequal()</code></a></li>
<li class="chapter" data-level="6.8.5" data-path="manip.html"><a href="manip.html#exact-equality-with-identical"><i class="fa fa-check"></i><b>6.8.5</b> Exact equality with <code>identical()</code></a></li>
<li class="chapter" data-level="6.8.6" data-path="manip.html"><a href="manip.html#element-contained-with-is.element"><i class="fa fa-check"></i><b>6.8.6</b> Element contained with <code>is.element()</code></a></li>
<li class="chapter" data-level="6.8.7" data-path="manip.html"><a href="manip.html#sorting-with-sort"><i class="fa fa-check"></i><b>6.8.7</b> Sorting with <code>sort()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stringr-basics.html"><a href="stringr-basics.html"><i class="fa fa-check"></i><b>7</b> Stringr Basics</a><ul>
<li class="chapter" data-level="7.1" data-path="stringr-basics.html"><a href="stringr-basics.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="stringr-basics.html"><a href="stringr-basics.html#package-stringr"><i class="fa fa-check"></i><b>7.2</b> Package <code>stringr</code></a></li>
<li class="chapter" data-level="7.3" data-path="stringr-basics.html"><a href="stringr-basics.html#basic-string-operations"><i class="fa fa-check"></i><b>7.3</b> Basic String Operations</a><ul>
<li class="chapter" data-level="7.3.1" data-path="stringr-basics.html"><a href="stringr-basics.html#concatenating-with-str_c"><i class="fa fa-check"></i><b>7.3.1</b> Concatenating with <code>str_c()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="stringr-basics.html"><a href="stringr-basics.html#number-of-characters-with-str_length"><i class="fa fa-check"></i><b>7.3.2</b> Number of characters with <code>str_length()</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="stringr-basics.html"><a href="stringr-basics.html#substring-with-str_sub"><i class="fa fa-check"></i><b>7.3.3</b> Substring with <code>str_sub()</code></a></li>
<li class="chapter" data-level="7.3.4" data-path="stringr-basics.html"><a href="stringr-basics.html#duplication-with-str_dup"><i class="fa fa-check"></i><b>7.3.4</b> Duplication with <code>str_dup()</code></a></li>
<li class="chapter" data-level="7.3.5" data-path="stringr-basics.html"><a href="stringr-basics.html#padding-with-str_pad"><i class="fa fa-check"></i><b>7.3.5</b> Padding with <code>str_pad()</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="stringr-basics.html"><a href="stringr-basics.html#wrapping-with-str_wrap"><i class="fa fa-check"></i><b>7.3.6</b> Wrapping with <code>str_wrap()</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="stringr-basics.html"><a href="stringr-basics.html#trimming-with-str_trim"><i class="fa fa-check"></i><b>7.3.7</b> Trimming with <code>str_trim()</code></a></li>
<li class="chapter" data-level="7.3.8" data-path="stringr-basics.html"><a href="stringr-basics.html#word-extraction-with-word"><i class="fa fa-check"></i><b>7.3.8</b> Word extraction with <code>word()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html"><i class="fa fa-check"></i><b>8</b> Basic Manipulation Examples</a><ul>
<li class="chapter" data-level="8.1" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#introduction-4"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-names-of-files"><i class="fa fa-check"></i><b>8.1.1</b> Example: Names of files</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-valid-color-names"><i class="fa fa-check"></i><b>8.1.2</b> Example: Valid Color Names</a></li>
<li class="chapter" data-level="8.1.3" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-me-and-you-plot"><i class="fa fa-check"></i><b>8.1.3</b> Example: Me and You plot</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Regex</b></span></li>
<li class="chapter" data-level="9" data-path="regex1.html"><a href="regex1.html"><i class="fa fa-check"></i><b>9</b> Regular Expressions</a><ul>
<li class="chapter" data-level="9.1" data-path="regex1.html"><a href="regex1.html#introduction-5"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="regex1.html"><a href="regex1.html#what-are-regular-expressions"><i class="fa fa-check"></i><b>9.2</b> What are Regular Expressions?</a><ul>
<li class="chapter" data-level="9.2.1" data-path="regex1.html"><a href="regex1.html#what-are-regular-expressions-used-for"><i class="fa fa-check"></i><b>9.2.1</b> What are Regular Expressions used for?</a></li>
<li class="chapter" data-level="9.2.2" data-path="regex1.html"><a href="regex1.html#a-word-of-caution-about-regex"><i class="fa fa-check"></i><b>9.2.2</b> A word of caution about regex</a></li>
<li class="chapter" data-level="9.2.3" data-path="regex1.html"><a href="regex1.html#regular-expressions-in-r"><i class="fa fa-check"></i><b>9.2.3</b> Regular Expressions in R</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regex1.html"><a href="regex1.html#regex-basics"><i class="fa fa-check"></i><b>9.3</b> Regex Basics</a></li>
<li class="chapter" data-level="9.4" data-path="regex1.html"><a href="regex1.html#matching-literal-characters"><i class="fa fa-check"></i><b>9.4</b> Matching Literal Characters</a></li>
<li class="chapter" data-level="9.5" data-path="regex1.html"><a href="regex1.html#metacharacters"><i class="fa fa-check"></i><b>9.5</b> Metacharacters</a><ul>
<li class="chapter" data-level="9.5.1" data-path="regex1.html"><a href="regex1.html#the-wild-metacharacter"><i class="fa fa-check"></i><b>9.5.1</b> The Wild Metacharacter</a></li>
<li class="chapter" data-level="9.5.2" data-path="regex1.html"><a href="regex1.html#escaping-metacharacters"><i class="fa fa-check"></i><b>9.5.2</b> Escaping metacharacters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="character-sets.html"><a href="character-sets.html"><i class="fa fa-check"></i><b>10</b> Character Sets</a><ul>
<li class="chapter" data-level="10.1" data-path="character-sets.html"><a href="character-sets.html#defining-character-sets"><i class="fa fa-check"></i><b>10.1</b> Defining character sets</a></li>
<li class="chapter" data-level="10.2" data-path="character-sets.html"><a href="character-sets.html#character-ranges"><i class="fa fa-check"></i><b>10.2</b> Character ranges</a></li>
<li class="chapter" data-level="10.3" data-path="character-sets.html"><a href="character-sets.html#negative-character-sets"><i class="fa fa-check"></i><b>10.3</b> Negative Character Sets</a></li>
<li class="chapter" data-level="10.4" data-path="character-sets.html"><a href="character-sets.html#metacharacters-inside-character-sets"><i class="fa fa-check"></i><b>10.4</b> Metacharacters inside character sets</a></li>
<li class="chapter" data-level="10.5" data-path="character-sets.html"><a href="character-sets.html#character-classes"><i class="fa fa-check"></i><b>10.5</b> Character Classes</a></li>
<li class="chapter" data-level="10.6" data-path="character-sets.html"><a href="character-sets.html#posix-character-classes"><i class="fa fa-check"></i><b>10.6</b> POSIX Character Classes</a></li>
</ul></li>
<li class="part"><span><b>V Applications</b></span></li>
<li class="chapter" data-level="11" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>11</b> Practical Applications</a><ul>
<li class="chapter" data-level="11.1" data-path="applications.html"><a href="applications.html#introduction-6"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>12</b> Matching HTML Tags</a><ul>
<li class="chapter" data-level="12.1" data-path="html.html"><a href="html.html#introduction-7"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="html.html"><a href="html.html#attributes-href"><i class="fa fa-check"></i><b>12.2</b> Attributes <code>href</code></a><ul>
<li class="chapter" data-level="12.2.1" data-path="html.html"><a href="html.html#getting-sig-links"><i class="fa fa-check"></i><b>12.2.1</b> Getting SIG links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="logs.html"><a href="logs.html"><i class="fa fa-check"></i><b>13</b> Data Log File</a><ul>
<li class="chapter" data-level="13.1" data-path="logs.html"><a href="logs.html#reading-the-text-file"><i class="fa fa-check"></i><b>13.1</b> Reading the text file</a><ul>
<li class="chapter" data-level="13.1.1" data-path="logs.html"><a href="logs.html#jpg-file-requests"><i class="fa fa-check"></i><b>13.1.1</b> JPG File Requests</a></li>
<li class="chapter" data-level="13.1.2" data-path="logs.html"><a href="logs.html#extracting-file-extensions"><i class="fa fa-check"></i><b>13.1.2</b> Extracting file extensions</a></li>
<li class="chapter" data-level="13.1.3" data-path="logs.html"><a href="logs.html#image-files"><i class="fa fa-check"></i><b>13.1.3</b> Image files</a></li>
<li class="chapter" data-level="13.1.4" data-path="logs.html"><a href="logs.html#how-to-match-image-files-with-one-regex-pattern"><i class="fa fa-check"></i><b>13.1.4</b> How to match image files with one regex pattern?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="biomed.html"><a href="biomed.html"><i class="fa fa-check"></i><b>14</b> BMC Journals Data</a><ul>
<li class="chapter" data-level="14.1" data-path="biomed.html"><a href="biomed.html#introduction-8"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="biomed.html"><a href="biomed.html#analyzing-journal-names"><i class="fa fa-check"></i><b>14.2</b> Analyzing Journal Names</a><ul>
<li class="chapter" data-level="14.2.1" data-path="biomed.html"><a href="biomed.html#preprocessing"><i class="fa fa-check"></i><b>14.2.1</b> Preprocessing</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="biomed.html"><a href="biomed.html#summary-statistics"><i class="fa fa-check"></i><b>14.3</b> Summary statistics</a></li>
<li class="chapter" data-level="14.4" data-path="biomed.html"><a href="biomed.html#common-words"><i class="fa fa-check"></i><b>14.4</b> Common words</a></li>
<li class="chapter" data-level="14.5" data-path="biomed.html"><a href="biomed.html#the-top-30-words"><i class="fa fa-check"></i><b>14.5</b> The top 30 words</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handling Strings with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="logs" class="section level1">
<h1><span class="header-section-number">13</span> Data Log File</h1>
<p>In this example, we’ll be using the text file <code>logfile.txt</code> located in the
<code>data/</code> folder of the book’s github repository:</p>
<p><a href="https://raw.githubusercontent.com/gastonstat/r4strings/master/data/logfile.txt" class="uri">https://raw.githubusercontent.com/gastonstat/r4strings/master/data/logfile.txt</a></p>
<p>This file is a <strong>server log file</strong> that contains the recorded events taking place in a web server. The content of the file is in a special format known as <em>common log format</em>. According to <a href="https://en.wikipedia.org/wiki/Common_Log_Format">wikipedia</a>:</p>
<blockquote>
<p>“The Common Log Format is a standardized text file format used by web servers when generating server log files.”</p>
</blockquote>
<p>Here’s an example of a log record; the text should in one line of code, but I’ve split it into 2 lines for readibility purposes:</p>
<pre><code>pd9049dac.dip.t-dialin.net - - [01/May/2001:01:51:25 -0700] 
&quot;GET /accesswatch/accesswatch-1.33/ HTTP/1.0&quot; 200 1004</code></pre>
<ul>
<li>A <code>&quot;-&quot;</code> in a field indicates missing data.</li>
<li><code>pd9049dac.dip.t-dialin.net</code> is the IP address of the client (remote host) which made the request to the server.</li>
<li><code>[01/May/2001:01:51:25 -0700]</code> is the date, time, and time zone that the request was received, by default in strftime format<code>%d/%b/%Y:%H:%M:%S %z</code>.</li>
<li><code>&quot;GET /accesswatch/accesswatch-1.33/ HTTP/1.0&quot;</code> is the request line from the client.</li>
<li>The method <code>GET, /accesswatch/accesswatch-1.33/</code> is the resource requested, and <code>HTTP/1.0</code> is the HTTP protocol.</li>
<li><code>200</code> is the HTTP status code returned to the client.
<ul>
<li><code>2xx</code> is a successful response</li>
<li><code>3xx</code> a redirection</li>
<li><code>4xx</code> a client error, and</li>
<li><code>5xx</code> a server error</li>
</ul></li>
<li><code>1004</code> is the size of the object returned to the client, measured in bytes.</li>
</ul>
<p>If you want to download a copy of the text file to your working directory run the following code:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1"><span class="co"># download file</span></a>
<a class="sourceLine" id="cb226-2" data-line-number="2">github &lt;-<span class="st"> &quot;https://raw.githubusercontent.com/gastonstat/r4strings&quot;</span></a>
<a class="sourceLine" id="cb226-3" data-line-number="3">textfile &lt;-<span class="st"> &quot;/master/data/logfile.txt&quot;</span></a>
<a class="sourceLine" id="cb226-4" data-line-number="4"><span class="kw">download.file</span>(<span class="dt">url =</span> <span class="kw">paste0</span>(github, textfile), <span class="dt">destfile =</span> <span class="st">&quot;logfile.txt&quot;</span>)</a></code></pre></div>
<div id="reading-the-text-file" class="section level2">
<h2><span class="header-section-number">13.1</span> Reading the text file</h2>
<p>The first step involves reading the data in R. How can you do this? One option is with the <code>readLines()</code> function which reads any text file into a character vector:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb227-1" data-line-number="1"><span class="co"># one option is to read in the content with &#39;readLines()&#39;</span></a>
<a class="sourceLine" id="cb227-2" data-line-number="2">logs &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="st">&#39;logfile.txt&#39;</span>)</a></code></pre></div>
<p>Let’s take a peek at the content of the vector <code>logs</code>:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1"><span class="co"># take a peek at the contents in logs</span></a>
<a class="sourceLine" id="cb228-2" data-line-number="2"><span class="kw">head</span>(logs)</a>
<a class="sourceLine" id="cb228-3" data-line-number="3"><span class="co">#&gt; [1] &quot;pd9049dac.dip.t-dialin.net - - [01/May/2001:01:51:25 -0700] \&quot;GET /accesswatch/accesswatch-1.33/ HTTP/1.0\&quot; 200 1004&quot;              </span></a>
<a class="sourceLine" id="cb228-4" data-line-number="4"><span class="co">#&gt; [2] &quot;pd9049dac.dip.t-dialin.net - - [01/May/2001:01:51:26 -0700] \&quot;GET /accesswatch/accesswatch-1.33/img/allifou.jpg HTTP/1.0\&quot; 304 -&quot;  </span></a>
<a class="sourceLine" id="cb228-5" data-line-number="5"><span class="co">#&gt; [3] &quot;pd9049dac.dip.t-dialin.net - - [01/May/2001:01:51:26 -0700] \&quot;GET /sa.inside.jpg HTTP/1.0\&quot; 304 -&quot;                                 </span></a>
<a class="sourceLine" id="cb228-6" data-line-number="6"><span class="co">#&gt; [4] &quot;pd9049dac.dip.t-dialin.net - - [01/May/2001:02:20:19 -0700] \&quot;GET /accesswatch/accesswatch-1.33/ HTTP/1.0\&quot; 200 7791&quot;              </span></a>
<a class="sourceLine" id="cb228-7" data-line-number="7"><span class="co">#&gt; [5] &quot;pd9049dac.dip.t-dialin.net - - [01/May/2001:02:20:20 -0700] \&quot;GET /accesswatch/accesswatch-1.33/img/allifou.jpg HTTP/1.0\&quot; 304 -&quot;  </span></a>
<a class="sourceLine" id="cb228-8" data-line-number="8"><span class="co">#&gt; [6] &quot;pd9049dac.dip.t-dialin.net - - [01/May/2001:02:20:20 -0700] \&quot;GET /accesswatch/accesswatch-1.33/img/blueblock.gif HTTP/1.0\&quot; 304 -&quot;</span></a></code></pre></div>
<p>Because the file contains 26033 lines (or elements), let’s get a subset by taking a random sample of size 50:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb229-1" data-line-number="1"><span class="co"># subset a sample of lines</span></a>
<a class="sourceLine" id="cb229-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">98765</span>)</a>
<a class="sourceLine" id="cb229-3" data-line-number="3">s &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(logs), <span class="dt">size =</span> <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb229-4" data-line-number="4">sublogs &lt;-<span class="st"> </span>logs[s]</a></code></pre></div>
<div id="jpg-file-requests" class="section level3">
<h3><span class="header-section-number">13.1.1</span> JPG File Requests</h3>
<p>To begin our regex experiments, let’s try to find out “how many requests involved a JPG file?”.
One way to answer the previous question is by counting the number of lines containing the pattern <code>&quot;jpg&quot;</code>. We can use <code>grep()</code> to match or detect this pattern:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1"><span class="co"># matching &quot;jpg&quot; (which lements)</span></a>
<a class="sourceLine" id="cb230-2" data-line-number="2"><span class="kw">grep</span>(<span class="st">&quot;jpg&quot;</span>, sublogs)</a>
<a class="sourceLine" id="cb230-3" data-line-number="3"><span class="co">#&gt;  [1]  1  2 10 19 20 33 42 45 46 50</span></a>
<a class="sourceLine" id="cb230-4" data-line-number="4"></a>
<a class="sourceLine" id="cb230-5" data-line-number="5"><span class="co"># showing value of matches</span></a>
<a class="sourceLine" id="cb230-6" data-line-number="6"><span class="kw">grep</span>(<span class="st">&quot;jpg&quot;</span>, sublogs, <span class="dt">value =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb230-7" data-line-number="7"><span class="co">#&gt;  [1] &quot;202.123.196.17 - - [29/May/2001:20:42:45 -0700] \&quot;GET /testing/images/pshtk.jpg HTTP/1.0\&quot; 200 34301&quot;               </span></a>
<a class="sourceLine" id="cb230-8" data-line-number="8"><span class="co">#&gt;  [2] &quot;210.162.154.147 - - [22/May/2001:21:18:01 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;              </span></a>
<a class="sourceLine" id="cb230-9" data-line-number="9"><span class="co">#&gt;  [3] &quot;203.61.155.10 - - [27/May/2001:20:13:09 -0700] \&quot;GET /testing/images/pshtk.jpg HTTP/1.0\&quot; 200 34301&quot;                </span></a>
<a class="sourceLine" id="cb230-10" data-line-number="10"><span class="co">#&gt;  [4] &quot;213.41.95.158 - - [22/May/2001:07:37:02 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;                </span></a>
<a class="sourceLine" id="cb230-11" data-line-number="11"><span class="co">#&gt;  [5] &quot;1cust113.tnt15.sfo3.da.uu.net - - [24/May/2001:04:27:34 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;</span></a>
<a class="sourceLine" id="cb230-12" data-line-number="12"><span class="co">#&gt;  [6] &quot;host5.aa-jupiter.com - - [24/May/2001:08:56:04 -0700] \&quot;GET /testing/images/archi_servlet.jpg HTTP/1.1\&quot; 304 -&quot;     </span></a>
<a class="sourceLine" id="cb230-13" data-line-number="13"><span class="co">#&gt;  [7] &quot;crash.birdstep.org - - [31/May/2001:05:41:29 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;           </span></a>
<a class="sourceLine" id="cb230-14" data-line-number="14"><span class="co">#&gt;  [8] &quot;61.132.62.80 - - [28/May/2001:00:50:12 -0700] \&quot;GET /testing/images/archi_servlet.jpg HTTP/1.0\&quot; 200 18646&quot;         </span></a>
<a class="sourceLine" id="cb230-15" data-line-number="15"><span class="co">#&gt;  [9] &quot;63.169.209.209 - - [29/May/2001:14:01:13 -0700] \&quot;GET /testing/images/archi_servlet.jpg HTTP/1.1\&quot; 200 18646&quot;       </span></a>
<a class="sourceLine" id="cb230-16" data-line-number="16"><span class="co">#&gt; [10] &quot;h206013050210.pbdir.com - - [24/May/2001:15:48:10 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.0\&quot; 200 18531&quot;</span></a></code></pre></div>
<p>We can try to be more specific by defining a pattern <code>&quot;.jpg&quot;</code> in which the <code>.</code> corresponds to the <em>literal</em> dot character. To match the dot, we need to escape it with <code>&quot;\\.&quot;</code>:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" data-line-number="1"><span class="co"># we could try to be more precise and match &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb231-2" data-line-number="2"><span class="kw">grep</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg &quot;</span>, sublogs, <span class="dt">value =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb231-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;202.123.196.17 - - [29/May/2001:20:42:45 -0700] \&quot;GET /testing/images/pshtk.jpg HTTP/1.0\&quot; 200 34301&quot;               </span></a>
<a class="sourceLine" id="cb231-4" data-line-number="4"><span class="co">#&gt;  [2] &quot;210.162.154.147 - - [22/May/2001:21:18:01 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;              </span></a>
<a class="sourceLine" id="cb231-5" data-line-number="5"><span class="co">#&gt;  [3] &quot;203.61.155.10 - - [27/May/2001:20:13:09 -0700] \&quot;GET /testing/images/pshtk.jpg HTTP/1.0\&quot; 200 34301&quot;                </span></a>
<a class="sourceLine" id="cb231-6" data-line-number="6"><span class="co">#&gt;  [4] &quot;213.41.95.158 - - [22/May/2001:07:37:02 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;                </span></a>
<a class="sourceLine" id="cb231-7" data-line-number="7"><span class="co">#&gt;  [5] &quot;1cust113.tnt15.sfo3.da.uu.net - - [24/May/2001:04:27:34 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;</span></a>
<a class="sourceLine" id="cb231-8" data-line-number="8"><span class="co">#&gt;  [6] &quot;host5.aa-jupiter.com - - [24/May/2001:08:56:04 -0700] \&quot;GET /testing/images/archi_servlet.jpg HTTP/1.1\&quot; 304 -&quot;     </span></a>
<a class="sourceLine" id="cb231-9" data-line-number="9"><span class="co">#&gt;  [7] &quot;crash.birdstep.org - - [31/May/2001:05:41:29 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.1\&quot; 200 18531&quot;           </span></a>
<a class="sourceLine" id="cb231-10" data-line-number="10"><span class="co">#&gt;  [8] &quot;61.132.62.80 - - [28/May/2001:00:50:12 -0700] \&quot;GET /testing/images/archi_servlet.jpg HTTP/1.0\&quot; 200 18646&quot;         </span></a>
<a class="sourceLine" id="cb231-11" data-line-number="11"><span class="co">#&gt;  [9] &quot;63.169.209.209 - - [29/May/2001:14:01:13 -0700] \&quot;GET /testing/images/archi_servlet.jpg HTTP/1.1\&quot; 200 18646&quot;       </span></a>
<a class="sourceLine" id="cb231-12" data-line-number="12"><span class="co">#&gt; [10] &quot;h206013050210.pbdir.com - - [24/May/2001:15:48:10 -0700] \&quot;GET /testing/images/archi.jpg HTTP/1.0\&quot; 200 18531&quot;</span></a></code></pre></div>
<p>A similar output of <code>grep()</code> can be obtained with <code>str_detect()</code>, which allows you to <em>detect</em> what elements contain a match to the specified pattern:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" data-line-number="1"><span class="co"># matching &quot;jpg&quot; (which lements)</span></a>
<a class="sourceLine" id="cb232-2" data-line-number="2"><span class="kw">str_detect</span>(<span class="dt">string =</span> sublogs, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg&quot;</span>)</a>
<a class="sourceLine" id="cb232-3" data-line-number="3"><span class="co">#&gt;  [1]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE</span></a>
<a class="sourceLine" id="cb232-4" data-line-number="4"><span class="co">#&gt; [12] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb232-5" data-line-number="5"><span class="co">#&gt; [23] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb232-6" data-line-number="6"><span class="co">#&gt; [34] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb232-7" data-line-number="7"><span class="co">#&gt; [45]  TRUE  TRUE FALSE FALSE FALSE  TRUE</span></a></code></pre></div>
<p>We can do the same for PNG extensions (or for GIF or ICO):</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" data-line-number="1"><span class="co"># matching &quot;png&quot; (which lements)</span></a>
<a class="sourceLine" id="cb233-2" data-line-number="2"><span class="kw">str_detect</span>(<span class="dt">string =</span> sublogs, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.png&quot;</span>)</a>
<a class="sourceLine" id="cb233-3" data-line-number="3"><span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb233-4" data-line-number="4"><span class="co">#&gt; [12] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb233-5" data-line-number="5"><span class="co">#&gt; [23] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb233-6" data-line-number="6"><span class="co">#&gt; [34] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb233-7" data-line-number="7"><span class="co">#&gt; [45] FALSE FALSE FALSE FALSE FALSE FALSE</span></a></code></pre></div>
</div>
<div id="extracting-file-extensions" class="section level3">
<h3><span class="header-section-number">13.1.2</span> Extracting file extensions</h3>
<p>Another common task when working with regular expressions has to do with pattern extraction. For this purposes, we can use <code>str_extract()</code>:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" data-line-number="1"><span class="co"># extracting &quot;jpg&quot; (which lements)</span></a>
<a class="sourceLine" id="cb234-2" data-line-number="2"><span class="kw">str_extract</span>(<span class="dt">string =</span> sublogs, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg&quot;</span>)</a>
<a class="sourceLine" id="cb234-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;.jpg&quot; &quot;.jpg&quot; NA     NA     NA     NA     NA     NA     NA     &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb234-4" data-line-number="4"><span class="co">#&gt; [11] NA     NA     NA     NA     NA     NA     NA     NA     &quot;.jpg&quot; &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb234-5" data-line-number="5"><span class="co">#&gt; [21] NA     NA     NA     NA     NA     NA     NA     NA     NA     NA    </span></a>
<a class="sourceLine" id="cb234-6" data-line-number="6"><span class="co">#&gt; [31] NA     NA     &quot;.jpg&quot; NA     NA     NA     NA     NA     NA     NA    </span></a>
<a class="sourceLine" id="cb234-7" data-line-number="7"><span class="co">#&gt; [41] NA     &quot;.jpg&quot; NA     NA     &quot;.jpg&quot; &quot;.jpg&quot; NA     NA     NA     &quot;.jpg&quot;</span></a></code></pre></div>
<p><code>str_extract()</code> actually let us confirm that we are matching the desired patterns. Notice that when there is no match, <code>str_extract()</code> returns a missing value <code>NA</code>.</p>
</div>
<div id="image-files" class="section level3">
<h3><span class="header-section-number">13.1.3</span> Image files</h3>
<p>Now let’s try to detect all types of image files: JPG, PNG, GIF, ICO</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1"><span class="co"># looking for image file extensions</span></a>
<a class="sourceLine" id="cb235-2" data-line-number="2">jpgs &lt;-<span class="st"> </span><span class="kw">str_detect</span>(logs, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg &quot;</span>)</a>
<a class="sourceLine" id="cb235-3" data-line-number="3"><span class="kw">sum</span>(jpgs)</a>
<a class="sourceLine" id="cb235-4" data-line-number="4"><span class="co">#&gt; [1] 5509</span></a>
<a class="sourceLine" id="cb235-5" data-line-number="5"></a>
<a class="sourceLine" id="cb235-6" data-line-number="6">pngs &lt;-<span class="st"> </span><span class="kw">str_detect</span>(logs, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.png &quot;</span>)</a>
<a class="sourceLine" id="cb235-7" data-line-number="7"><span class="kw">sum</span>(pngs)</a>
<a class="sourceLine" id="cb235-8" data-line-number="8"><span class="co">#&gt; [1] 1374</span></a>
<a class="sourceLine" id="cb235-9" data-line-number="9"></a>
<a class="sourceLine" id="cb235-10" data-line-number="10">gifs &lt;-<span class="st"> </span><span class="kw">str_detect</span>(logs, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.gif&quot;</span>)</a>
<a class="sourceLine" id="cb235-11" data-line-number="11"><span class="kw">sum</span>(gifs)</a>
<a class="sourceLine" id="cb235-12" data-line-number="12"><span class="co">#&gt; [1] 8818</span></a>
<a class="sourceLine" id="cb235-13" data-line-number="13"></a>
<a class="sourceLine" id="cb235-14" data-line-number="14">icos &lt;-<span class="st"> </span><span class="kw">str_detect</span>(logs, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.ico &quot;</span>)</a>
<a class="sourceLine" id="cb235-15" data-line-number="15"><span class="kw">sum</span>(icos)</a>
<a class="sourceLine" id="cb235-16" data-line-number="16"><span class="co">#&gt; [1] 100</span></a></code></pre></div>
</div>
<div id="how-to-match-image-files-with-one-regex-pattern" class="section level3">
<h3><span class="header-section-number">13.1.4</span> How to match image files with one regex pattern?</h3>
<p>We can use character sets to define a more generic pattern. For instance, to
match <code>&quot;jpg&quot;</code> or <code>&quot;png&quot;</code>, we could join three character sets: <code>&quot;[jp][pn][g]&quot;</code>.
The first set <code>[jp]</code> looks for <code>j</code> or <code>p</code>, the second set <code>[pn]</code> looks for
<code>p</code> or <code>n</code>, and the third set simply looks for <code>g</code>.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1"><span class="co"># matching &quot;jpg&quot; or &quot;png&quot;</span></a>
<a class="sourceLine" id="cb236-2" data-line-number="2">jpg_png_lines &lt;-<span class="st"> </span><span class="kw">str_detect</span>(sublogs, <span class="st">&quot;[jp][pn][g]&quot;</span>)</a>
<a class="sourceLine" id="cb236-3" data-line-number="3"><span class="kw">sum</span>(jpg_png_lines)</a>
<a class="sourceLine" id="cb236-4" data-line-number="4"><span class="co">#&gt; [1] 11</span></a></code></pre></div>
<p>Including the dot, we can use: <code>&quot;\\.[jp][pn][g]&quot;</code></p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1"><span class="co"># matching &quot;jpg&quot; or &quot;png&quot;</span></a>
<a class="sourceLine" id="cb237-2" data-line-number="2">jpg_png_lines &lt;-<span class="st"> </span><span class="kw">str_detect</span>(sublogs, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.[jp][pn][g]&quot;</span>)</a>
<a class="sourceLine" id="cb237-3" data-line-number="3"><span class="kw">sum</span>(jpg_png_lines)</a>
<a class="sourceLine" id="cb237-4" data-line-number="4"><span class="co">#&gt; [1] 11</span></a></code></pre></div>
<p>We could generalize the pattern to include the GIF and ICO extensions:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1"><span class="co"># matching &quot;jpg&quot; or &quot;png&quot; or &quot;gif&quot;</span></a>
<a class="sourceLine" id="cb238-2" data-line-number="2">image_lines1 &lt;-<span class="st"> </span><span class="kw">str_detect</span>(sublogs, <span class="st">&quot;[jpgi][pnic][gfo]&quot;</span>)</a>
<a class="sourceLine" id="cb238-3" data-line-number="3"><span class="kw">sum</span>(image_lines1)</a>
<a class="sourceLine" id="cb238-4" data-line-number="4"><span class="co">#&gt; [1] 46</span></a></code></pre></div>
<p>To confirm that we are actually matching <code>jpg</code>, <code>png</code>, <code>gif</code> and <code>ico</code>, let’s
use <code>str_extract()</code></p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1"><span class="co"># are we correctly extracting image file extensions?</span></a>
<a class="sourceLine" id="cb239-2" data-line-number="2"><span class="kw">str_extract</span>(sublogs, <span class="st">&quot;[jpgi][pnic][gfo]&quot;</span>)</a>
<a class="sourceLine" id="cb239-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;gif&quot; NA    &quot;ing&quot; &quot;ing&quot; &quot;gif&quot; &quot;ing&quot; &quot;ing&quot; &quot;gif&quot;</span></a>
<a class="sourceLine" id="cb239-4" data-line-number="4"><span class="co">#&gt; [12] &quot;ing&quot; &quot;gif&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;gif&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot;</span></a>
<a class="sourceLine" id="cb239-5" data-line-number="5"><span class="co">#&gt; [23] &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;gif&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; NA    &quot;ing&quot; &quot;ing&quot;</span></a>
<a class="sourceLine" id="cb239-6" data-line-number="6"><span class="co">#&gt; [34] &quot;ing&quot; &quot;ing&quot; NA    &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;ing&quot; &quot;inf&quot; &quot;ing&quot;</span></a>
<a class="sourceLine" id="cb239-7" data-line-number="7"><span class="co">#&gt; [45] &quot;ing&quot; &quot;ing&quot; NA    &quot;ing&quot; &quot;gif&quot; &quot;ing&quot;</span></a></code></pre></div>
<p>The previous pattern does not really work as expected: note that we are matching
the patterns formed by <code>&quot;ing&quot;</code> and <code>&quot;inf&quot;</code> which do not correspond to image file
extensions.</p>
<p>An alternative way to detect JPG and PNG is by grouping patterns inside
parentheses, and separating them with the metacharacter <code>&quot;|&quot;</code> which means <em>OR</em>:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" data-line-number="1"><span class="co"># detecting .jpg OR .png</span></a>
<a class="sourceLine" id="cb240-2" data-line-number="2">jpg_png &lt;-<span class="st"> </span><span class="kw">str_detect</span>(sublogs, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg|</span><span class="ch">\\</span><span class="st">.png&quot;</span>)</a>
<a class="sourceLine" id="cb240-3" data-line-number="3"><span class="kw">sum</span>(jpg_png)</a>
<a class="sourceLine" id="cb240-4" data-line-number="4"><span class="co">#&gt; [1] 11</span></a></code></pre></div>
<p>Here’s how to detect all the extension in one single pattern:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="co"># matching &quot;jpg&quot; or &quot;png&quot; or &quot;gif&quot; or &quot;ico&quot;</span></a>
<a class="sourceLine" id="cb241-2" data-line-number="2">image_lines &lt;-<span class="st"> </span><span class="kw">str_detect</span>(sublogs, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg|</span><span class="ch">\\</span><span class="st">.png|</span><span class="ch">\\</span><span class="st">.gif|</span><span class="ch">\\</span><span class="st">.ico&quot;</span>)</a>
<a class="sourceLine" id="cb241-3" data-line-number="3"><span class="kw">sum</span>(image_lines)</a>
<a class="sourceLine" id="cb241-4" data-line-number="4"><span class="co">#&gt; [1] 29</span></a></code></pre></div>
<p>To make sure our regex operation is successful, let’s see the output of
<code>str_extract()</code>:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1">images_output &lt;-<span class="st"> </span><span class="kw">str_extract</span>(sublogs, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg|</span><span class="ch">\\</span><span class="st">.png|</span><span class="ch">\\</span><span class="st">.gif|</span><span class="ch">\\</span><span class="st">.ico&quot;</span>)</a>
<a class="sourceLine" id="cb242-2" data-line-number="2">images_output</a>
<a class="sourceLine" id="cb242-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;.jpg&quot; &quot;.jpg&quot; NA     &quot;.gif&quot; NA     &quot;.gif&quot; NA     &quot;.gif&quot; NA     &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb242-4" data-line-number="4"><span class="co">#&gt; [11] &quot;.gif&quot; &quot;.gif&quot; &quot;.gif&quot; &quot;.gif&quot; NA     NA     &quot;.gif&quot; &quot;.gif&quot; &quot;.jpg&quot; &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb242-5" data-line-number="5"><span class="co">#&gt; [21] &quot;.gif&quot; &quot;.gif&quot; NA     NA     NA     &quot;.gif&quot; NA     &quot;.png&quot; NA     NA    </span></a>
<a class="sourceLine" id="cb242-6" data-line-number="6"><span class="co">#&gt; [31] NA     &quot;.ico&quot; &quot;.jpg&quot; NA     &quot;.gif&quot; NA     NA     &quot;.gif&quot; NA     NA    </span></a>
<a class="sourceLine" id="cb242-7" data-line-number="7"><span class="co">#&gt; [41] NA     &quot;.jpg&quot; NA     &quot;.gif&quot; &quot;.jpg&quot; &quot;.jpg&quot; NA     &quot;.gif&quot; &quot;.gif&quot; &quot;.jpg&quot;</span></a></code></pre></div>
<p>There’s some repetition with the dot character; we can modify our previous
pattern by placing the dot <code>&quot;\\.&quot;</code> at the beginning:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1">images_output &lt;-<span class="st"> </span><span class="kw">str_extract</span>(sublogs, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.jpg|png|gif|ico&quot;</span>)</a>
<a class="sourceLine" id="cb243-2" data-line-number="2">images_output</a>
<a class="sourceLine" id="cb243-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;.jpg&quot; &quot;.jpg&quot; NA     &quot;gif&quot;  NA     &quot;gif&quot;  NA     &quot;gif&quot;  NA     &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb243-4" data-line-number="4"><span class="co">#&gt; [11] &quot;gif&quot;  &quot;gif&quot;  &quot;gif&quot;  &quot;gif&quot;  NA     NA     &quot;gif&quot;  &quot;gif&quot;  &quot;.jpg&quot; &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb243-5" data-line-number="5"><span class="co">#&gt; [21] &quot;gif&quot;  &quot;gif&quot;  NA     NA     NA     &quot;gif&quot;  NA     &quot;png&quot;  NA     NA    </span></a>
<a class="sourceLine" id="cb243-6" data-line-number="6"><span class="co">#&gt; [31] NA     &quot;ico&quot;  &quot;.jpg&quot; NA     &quot;gif&quot;  NA     NA     &quot;gif&quot;  NA     NA    </span></a>
<a class="sourceLine" id="cb243-7" data-line-number="7"><span class="co">#&gt; [41] NA     &quot;.jpg&quot; NA     &quot;gif&quot;  &quot;.jpg&quot; &quot;.jpg&quot; NA     &quot;gif&quot;  &quot;gif&quot;  &quot;.jpg&quot;</span></a></code></pre></div>
<p>Notice that the dot only appears next to <code>&quot;.jpg&quot;</code> but not with the other
type of extensions. What we need to do is group the file extensions by surrounding
them with parentheses:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1">images_output &lt;-<span class="st"> </span><span class="kw">str_extract</span>(sublogs, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.(jpg|png|gif|ico)&quot;</span>)</a>
<a class="sourceLine" id="cb244-2" data-line-number="2">images_output</a>
<a class="sourceLine" id="cb244-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;.jpg&quot; &quot;.jpg&quot; NA     &quot;.gif&quot; NA     &quot;.gif&quot; NA     &quot;.gif&quot; NA     &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb244-4" data-line-number="4"><span class="co">#&gt; [11] &quot;.gif&quot; &quot;.gif&quot; &quot;.gif&quot; &quot;.gif&quot; NA     NA     &quot;.gif&quot; &quot;.gif&quot; &quot;.jpg&quot; &quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb244-5" data-line-number="5"><span class="co">#&gt; [21] &quot;.gif&quot; &quot;.gif&quot; NA     NA     NA     &quot;.gif&quot; NA     &quot;.png&quot; NA     NA    </span></a>
<a class="sourceLine" id="cb244-6" data-line-number="6"><span class="co">#&gt; [31] NA     &quot;.ico&quot; &quot;.jpg&quot; NA     &quot;.gif&quot; NA     NA     &quot;.gif&quot; NA     NA    </span></a>
<a class="sourceLine" id="cb244-7" data-line-number="7"><span class="co">#&gt; [41] NA     &quot;.jpg&quot; NA     &quot;.gif&quot; &quot;.jpg&quot; &quot;.jpg&quot; NA     &quot;.gif&quot; &quot;.gif&quot; &quot;.jpg&quot;</span></a></code></pre></div>
<p>Now let’s apply the pattern on the entire log file, to count the number of files
of each type:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="co"># frequencies</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2">img_extensions &lt;-<span class="st"> </span><span class="kw">str_extract</span>(logs, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.(jpg|png|gif|ico)&quot;</span>)</a>
<a class="sourceLine" id="cb245-3" data-line-number="3"><span class="kw">table</span>(img_extensions)</a>
<a class="sourceLine" id="cb245-4" data-line-number="4"><span class="co">#&gt; img_extensions</span></a>
<a class="sourceLine" id="cb245-5" data-line-number="5"><span class="co">#&gt; .gif .ico .jpg .png </span></a>
<a class="sourceLine" id="cb245-6" data-line-number="6"><span class="co">#&gt; 8818  100 5509 1374</span></a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="html.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="biomed.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/gastonstat/r4strings/edit/master/logs.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
